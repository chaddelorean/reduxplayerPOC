!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){"use strict";r.r(t),r.d(t,"__DO_NOT_USE__ActionTypes",(function(){return i})),r.d(t,"applyMiddleware",(function(){return b})),r.d(t,"bindActionCreators",(function(){return d})),r.d(t,"combineReducers",(function(){return s})),r.d(t,"compose",(function(){return h})),r.d(t,"createStore",(function(){return c}));var n=r(1),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function a(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,r){var o;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(c)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,s=t,l=[],d=l,p=!1;function f(){d===l&&(d=l.slice())}function y(){if(p)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return s}function h(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(p)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return f(),d.push(e),function(){if(t){if(p)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,f();var r=d.indexOf(e);d.splice(r,1),l=null}}}function b(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,s=u(s,e)}finally{p=!1}for(var t=l=d,r=0;r<t.length;r++){(0,t[r])()}return e}function m(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,b({type:i.REPLACE})}function w(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(y())}return r(),{unsubscribe:t(r)}}})[n.a]=function(){return this},e}return b({type:i.INIT}),(o={dispatch:b,subscribe:h,getState:y,replaceReducer:m})[n.a]=w,o}function u(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function s(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];0,"function"==typeof e[o]&&(r[o]=e[o])}var a,c=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:i.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var n=!1,o={},i=0;i<c.length;i++){var s=c[i],l=r[s],d=e[s],p=l(d,t);if(void 0===p){var f=u(s,t);throw new Error(f)}o[s]=p,n=n||p!==d}return(n=n||c.length!==Object.keys(e).length)?o:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function d(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var r={};for(var n in e){var o=e[n];"function"==typeof o&&(r[n]=l(o,t))}return r}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function b(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(o)}));return y({},r,{dispatch:n=h.apply(void 0,i)(r.dispatch)})}}}},function(e,t,r){"use strict";(function(e,n){var o,i=r(2);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:n;var a=Object(i.a)(o);t.a=a}).call(this,r(4),r(5)(e))},function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";var n=r(0).compose;t.__esModule=!0,t.composeWithDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?n:n.apply(null,arguments)},t.devToolsEnhancer="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,r){"use strict";r.r(t);const n="PLAYING",o="STOPPED",i="PAUSED",a="SEEKING",c="STALLED",u="ENDED",s="TIME_UPDATE",l="ABSOLUTE_TIME_UPDATE",d="SET_BEACON",p="CLEAR_BEACONS",f="PLAY_STATE",y="PAUSE_STATE",h="STALLED_STATE",b="SEEKING_STATE",m="STOPPED_STATE",w="NEXT_CLIP",v="PREV_CLIP",E="SWITCH_CLIP",g="CLIPLIST_UPDATE",T="CLIP_ENDED",O="SET_TIME_SHIFTABLE",S="defaultImpression",_="firstQuartile",I="midway",P="thirdQuartile",j="complete",x=e=>({type:l,payload:e}),A=e=>({type:d,payload:e}),L=e=>({type:O,payload:e}),k=()=>({type:h}),N=function(e){return 1e3*e};var C=r(0);let D=Object(C.combineReducers)({playerStateReducer:(e=o,t)=>{switch(t.type){case m:e=o;break;case f:e=n;break;case y:e=i;break;case h:e=c;break;case b:e=a;break;case T:e=u}return e},clipListReducer:(e={clipList:[],currentClipIndex:0},t)=>{switch(t.type){case w:e.currentClipIndex++;break;case v:e.currentClipIndex--;break;case E:e.currentClipIndex=t.clipIndex;break;case g:e=t.assetClipList}return e}});var R=r(3);const U=Object(R.composeWithDevTools)({realtime:!0}),M=Object(C.createStore)((e={apjsTime:0,playerTime:0,beacons:[],timeShiftable:!0},t)=>{switch(t.type){case s:e.apjsTime+=t.msIncrement,e.playerTime=t.playerTime;break;case l:e.apjsTime=t.payload,e.playerTime=t.payload;break;case d:let r=e.beacons.findIndex(e=>e.type===t.payload.type&&e.timeIndex===t.payload.timeIndex);-1!==r?e.beacons.splice(r,t.payload):e.beacons.push(t.payload);break;case p:e.beacons=[];break;case O:e.timeShiftable=t.payload}return e},U()),B=Object(C.createStore)(D,U());var X=[S,_,I,P,j],F=[{url:"https://media.w3.org/2010/05/sintel/trailer.mp4"},{url:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"},{url:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4"}];let V,W;function K(e){let t=B.getState();if(t.clipListReducer){let r=t.clipListReducer.clipList,n=t.clipListReducer.currentClipIndex||0,o=document.createElement("source");o.type="video/mp4",o.src=r[n].url,e.innerHTML="",e.appendChild(o),n>0&&e.load()}}function Y(){let e=M.getState().apjsTime,t=e/1e3;let r=M.getState().playerTime;e%1e3==0&&0!==e&&console.log(`1 second interval happened! APJSTime: ${e} ms PlayerTime: ${r} sec`),t%30==0&&0!==e&&console.log(`30 second interval happened! APJSTime: ${t} sec PlayerTime: ${r} sec`),t%60==0&&0!==e&&console.log(`1 minute interval happened! APJSTime: ${t} sec PlayerTime: ${r} sec`),t%300==0&&0!==e&&console.log(`5 minute interval happened! APJSTime: ${t} sec PlayerTime: ${r} sec`);let n=M.getState().beacons,o=n.filter(e=>!e.isFired);o&&Array.isArray(o)&&o.length>0&&o[0].timeIndex<=e&&(o[0].isFired=!0,M.dispatch(A(o[0])),M.dispatch(L(!1)),console.log("Beacon event fired: ",o[0]));let i=M.getState().timeShiftable,a=n.filter(e=>e.isFired);a&&Array.isArray(a)&&a.length>0&&!i&&a[a.length-1].timeIndex+15e3<=e&&M.dispatch(L(!0))}$((function(){V=document.getElementById("sampleVideoPlayer"),V.onplay=()=>{!function(){let e=V.duration;X.map(t=>{let r=0;switch(t){case S:r=0;break;case _:r=.25*e;break;case I:r=e/2;break;case P:r=.75*e;break;case j:r=e}let n={type:t,timeIndex:N(r),isFired:!1};M.dispatch(A(n))})}(),B.dispatch({type:f}),W=window.setInterval(()=>{let e=M.getState().playerTime,t=V.currentTime,r=B.getState().playerState;t-e>1e4&&r!==c&&(console.error("Stall detected"),B.dispatch(k())),M.dispatch({type:s,msIncrement:100,playerTime:t})},100)},V.onpause=()=>{B.dispatch({type:y}),clearInterval(W)},V.onstalled=()=>{B.dispatch(k())},V.onseeking=()=>{B.dispatch({type:b})},V.onseeked=e=>{var t;M.dispatch(x((t=N(V.currentTime),100*Math.ceil(t/100))))},V.onended=()=>{B.dispatch({type:T});let e=B.getState();if(e){(e.clipListReducer.currentClipIndex||0)+1<e.clipListReducer.clipList.length&&(M.dispatch(x(0)),M.dispatch({type:p}),B.dispatch({type:w}),K(V))}},V.onloadeddata=()=>{(B.getState().clipListReducer.currentClipIndex||0)>0&&V.play()},B.dispatch({type:g,assetClipList:{clipList:F,currentClipIndex:0}}),K(V),M.subscribe(Y)}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlZHV4L2VzL3JlZHV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9lcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3ltYm9sLW9ic2VydmFibGUvZXMvcG9ueWZpbGwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlZHV4LWRldnRvb2xzLWV4dGVuc2lvbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9oYXJtb255LW1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdHlwZXMvcGxheWVyRW51bXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjdGlvbnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9yZWR1Y2Vycy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc3RvcmUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3R5cGVzL2JlYWNvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3R5cGVzL2NsaXBMaXN0LmpzIiwid2VicGFjazovLy8uL3NyYy9tYWluLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmFuZG9tU3RyaW5nIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwic3BsaXQiLCJqb2luIiwiQWN0aW9uVHlwZXMiLCJJTklUIiwiUkVQTEFDRSIsIlBST0JFX1VOS05PV05fQUNUSU9OIiwiaXNQbGFpbk9iamVjdCIsIm9iaiIsInByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJjcmVhdGVTdG9yZSIsInJlZHVjZXIiLCJwcmVsb2FkZWRTdGF0ZSIsImVuaGFuY2VyIiwiX3JlZjIiLCJhcmd1bWVudHMiLCJFcnJvciIsInVuZGVmaW5lZCIsImN1cnJlbnRSZWR1Y2VyIiwiY3VycmVudFN0YXRlIiwiY3VycmVudExpc3RlbmVycyIsIm5leHRMaXN0ZW5lcnMiLCJpc0Rpc3BhdGNoaW5nIiwiZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycyIsInNsaWNlIiwiZ2V0U3RhdGUiLCJzdWJzY3JpYmUiLCJsaXN0ZW5lciIsImlzU3Vic2NyaWJlZCIsInB1c2giLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJkaXNwYXRjaCIsImFjdGlvbiIsInR5cGUiLCJsaXN0ZW5lcnMiLCJsZW5ndGgiLCJyZXBsYWNlUmVkdWNlciIsIm5leHRSZWR1Y2VyIiwib2JzZXJ2YWJsZSIsIl9yZWYiLCJvdXRlclN1YnNjcmliZSIsIm9ic2VydmVyIiwiVHlwZUVycm9yIiwib2JzZXJ2ZVN0YXRlIiwibmV4dCIsInVuc3Vic2NyaWJlIiwidGhpcyIsImdldFVuZGVmaW5lZFN0YXRlRXJyb3JNZXNzYWdlIiwiYWN0aW9uVHlwZSIsIlN0cmluZyIsImNvbWJpbmVSZWR1Y2VycyIsInJlZHVjZXJzIiwicmVkdWNlcktleXMiLCJrZXlzIiwiZmluYWxSZWR1Y2VycyIsInNoYXBlQXNzZXJ0aW9uRXJyb3IiLCJmaW5hbFJlZHVjZXJLZXlzIiwiZm9yRWFjaCIsImFzc2VydFJlZHVjZXJTaGFwZSIsImUiLCJzdGF0ZSIsImhhc0NoYW5nZWQiLCJuZXh0U3RhdGUiLCJfaSIsIl9rZXkiLCJwcmV2aW91c1N0YXRlRm9yS2V5IiwibmV4dFN0YXRlRm9yS2V5IiwiZXJyb3JNZXNzYWdlIiwiYmluZEFjdGlvbkNyZWF0b3IiLCJhY3Rpb25DcmVhdG9yIiwiYXBwbHkiLCJiaW5kQWN0aW9uQ3JlYXRvcnMiLCJhY3Rpb25DcmVhdG9ycyIsImJvdW5kQWN0aW9uQ3JlYXRvcnMiLCJfZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIm93bktleXMiLCJlbnVtZXJhYmxlT25seSIsImdldE93blByb3BlcnR5U3ltYm9scyIsImZpbHRlciIsInN5bSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl9vYmplY3RTcHJlYWQyIiwidGFyZ2V0Iiwic291cmNlIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJjb21wb3NlIiwiX2xlbiIsImZ1bmNzIiwiQXJyYXkiLCJhcmciLCJyZWR1Y2UiLCJhIiwiYiIsImFwcGx5TWlkZGxld2FyZSIsIm1pZGRsZXdhcmVzIiwic3RvcmUiLCJfZGlzcGF0Y2giLCJtaWRkbGV3YXJlQVBJIiwiY2hhaW4iLCJtYXAiLCJtaWRkbGV3YXJlIiwicm9vdCIsInNlbGYiLCJ3aW5kb3ciLCJnbG9iYWwiLCJyZXN1bHQiLCJzeW1ib2xPYnNlcnZhYmxlUG9ueWZpbGwiLCJjb21wb3NlV2l0aERldlRvb2xzIiwiX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fQ09NUE9TRV9fIiwiZGV2VG9vbHNFbmhhbmNlciIsIl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX18iLCJub29wIiwiZyIsIkZ1bmN0aW9uIiwib3JpZ2luYWxNb2R1bGUiLCJ3ZWJwYWNrUG9seWZpbGwiLCJjaGlsZHJlbiIsInBsYXllckVudW1zIiwicGxheWVyQWN0aW9ucyIsImJlYWNvblR5cGVzIiwic2V0QWJvc2x1dGVUaW1lbGluZSIsIm5ld1RpbWUiLCJwYXlsb2FkIiwic2V0QmVhY29uIiwiYmVhY29uIiwic2V0VGltZVNoaWZ0YWJsZSIsInRpbWVTaGlmdGFibGUiLCJzdGFsbGVkU3RhdGUiLCJjb252ZXJ0VG9NaWxsaXNlY29uZHMiLCJ0aW1lIiwiYXBKU1JlZHVjZXJzIiwicGxheWVyU3RhdGVSZWR1Y2VyIiwicGxheWVyU3RhdGUiLCJjbGlwTGlzdFJlZHVjZXIiLCJhc3NldENsaXBMaXN0IiwiY2xpcExpc3QiLCJjdXJyZW50Q2xpcEluZGV4IiwiY2xpcEluZGV4IiwiY29tcG9zZUVuaGFuY2VycyIsInJlYWx0aW1lIiwidGltZWxpbmVTdG9yZSIsInRpbWVPYmplY3QiLCJhcGpzVGltZSIsInBsYXllclRpbWUiLCJiZWFjb25zIiwibXNJbmNyZW1lbnQiLCJmaW5kSW5kZXgiLCJ0aW1lSW5kZXgiLCJhcGpzU3RvcmUiLCJ1cmwiLCJ0aW1lbGluZUludGVydmFsIiwibG9hZFZpZGVvU3JjIiwic2FtcGxlVmlkZW9QbGF5ZXIiLCJhcGpzU3RvcmVTdGF0ZSIsImNsaXBMaXN0RnJvbVN0b3JlIiwic291cmNlRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNyYyIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwibG9hZCIsIm9uVGltZVVwZGF0ZSIsImN1cnJlbnRBUEpTVGltZU1TIiwiY3VycmVudEFQSlNUaW1lU2Vjb25kcyIsImN1cnJlbnRQbGF5ZXJUaW1lIiwiY29uc29sZSIsImxvZyIsInBlbmRpbmdCZWFjb25zIiwiaXNGaXJlZCIsImlzQXJyYXkiLCJpc1RpbWVTaGlmdGFibGUiLCJsYXN0RmlyZWRCZWFjb24iLCIkIiwiZ2V0RWxlbWVudEJ5SWQiLCJvbnBsYXkiLCJhc3NldER1cmF0aW9uIiwiZHVyYXRpb24iLCJiZWFjb25UeXBlIiwicHJvY2Vzc0JlYWNvbnMiLCJzZXRJbnRlcnZhbCIsInByZXZQbGF5ZXJUaW1lIiwiY3VycmVudEFQSlNUaW1lIiwiY3VycmVudFRpbWUiLCJjdXJyZW50UGxheWVyU3RhdGUiLCJlcnJvciIsIm9ucGF1c2UiLCJjbGVhckludGVydmFsIiwib25zdGFsbGVkIiwib25zZWVraW5nIiwib25zZWVrZWQiLCJldmVudCIsImNlaWwiLCJvbmVuZGVkIiwib25sb2FkZWRkYXRhIiwicGxheSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFP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TXdGLEVBQ04yQixZTUdpQixJTkZqQkYsV00rR29EdUMsS0E3R25DLE1BYWpCLEVBQWtCSSxRQUFVLEtBQ3hCdEMsRUFBVXhILFNOVU8sQ0FDckJFLEtBQU13RixJTVZGcUUsY0FBY3JDLElBRWxCLEVBQWtCc0MsVUFBWSxLQUMxQnhDLEVBQVV4SCxTQUFTbUcsTUFFdkIsRUFBa0I4RCxVQUFZLEtBQzFCekMsRUFBVXhILFNOZVMsQ0FDdkJFLEtBQU13RixLTWROLEVBQWtCd0UsU0FBWUMsSUw5QlAsSUFBU2hELEVLK0I1QkgsRUFBY2hILFNBQVM0RixHTC9CS3VCLEVLK0JrQ2YsRUFBc0IsRUFBa0J1RCxhTDlCdkUsSUFBNUJoTSxLQUFLeU0sS0FBS2pELEVBQVcsU0tnQzVCLEVBQWtCa0QsUUFBVSxLQUN4QjdDLEVBQVV4SCxTTjBCTSxDQUNwQkUsS0FBTXdGLElNMUJGLElBQUltQyxFQUFpQkwsRUFBVWhJLFdBQy9CLEdBQUlxSSxFQUFnQixFQUNPQSxFQUFlcEIsZ0JBQWdCRyxrQkFBb0IsR0FFbkQsRUFEQ2lCLEVBQWVwQixnQkFBZ0JFLFNBQ1Z2RyxTQUN6QzRHLEVBQWNoSCxTQUFTNEYsRUFBb0IsSUFDM0NvQixFQUFjaEgsU052QkgsQ0FDdkJFLEtBQU13RixJTXVCTThCLEVBQVV4SCxTTktILENBQ25CRSxLQUFNd0YsSU1MTWlDLEVBQWEsTUFJekIsRUFBa0IyQyxhQUFlLE1BQ1I5QyxFQUFVaEksV0FDT2lILGdCQUFnQkcsa0JBQW9CLEdBQ25ELEdBQ25CLEVBQWtCMkQsUUFJMUIvQyxFQUFVeEgsU05TeUMsQ0FDbkRFLEtBQU13RixFQUNOZ0IsY0FBZSxDQUNYQyxTTVo4QixFTmE5QkMsaUJNYndDLEtBQzVDZSxFQUFhLEdBQ2JYLEVBQWN2SCxVQUFVNkkiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA2KTtcbiIsImltcG9ydCAkJG9ic2VydmFibGUgZnJvbSAnc3ltYm9sLW9ic2VydmFibGUnO1xuXG4vKipcbiAqIFRoZXNlIGFyZSBwcml2YXRlIGFjdGlvbiB0eXBlcyByZXNlcnZlZCBieSBSZWR1eC5cbiAqIEZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB5b3UgbXVzdCByZXR1cm4gdGhlIGN1cnJlbnQgc3RhdGUuXG4gKiBJZiB0aGUgY3VycmVudCBzdGF0ZSBpcyB1bmRlZmluZWQsIHlvdSBtdXN0IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZS5cbiAqIERvIG5vdCByZWZlcmVuY2UgdGhlc2UgYWN0aW9uIHR5cGVzIGRpcmVjdGx5IGluIHlvdXIgY29kZS5cbiAqL1xudmFyIHJhbmRvbVN0cmluZyA9IGZ1bmN0aW9uIHJhbmRvbVN0cmluZygpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KS5zcGxpdCgnJykuam9pbignLicpO1xufTtcblxudmFyIEFjdGlvblR5cGVzID0ge1xuICBJTklUOiBcIkBAcmVkdXgvSU5JVFwiICsgcmFuZG9tU3RyaW5nKCksXG4gIFJFUExBQ0U6IFwiQEByZWR1eC9SRVBMQUNFXCIgKyByYW5kb21TdHJpbmcoKSxcbiAgUFJPQkVfVU5LTk9XTl9BQ1RJT046IGZ1bmN0aW9uIFBST0JFX1VOS05PV05fQUNUSU9OKCkge1xuICAgIHJldHVybiBcIkBAcmVkdXgvUFJPQkVfVU5LTk9XTl9BQ1RJT05cIiArIHJhbmRvbVN0cmluZygpO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7YW55fSBvYmogVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGFyZ3VtZW50IGFwcGVhcnMgdG8gYmUgYSBwbGFpbiBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgdmFyIHByb3RvID0gb2JqO1xuXG4gIHdoaWxlIChPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pICE9PSBudWxsKSB7XG4gICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopID09PSBwcm90bztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUmVkdXggc3RvcmUgdGhhdCBob2xkcyB0aGUgc3RhdGUgdHJlZS5cbiAqIFRoZSBvbmx5IHdheSB0byBjaGFuZ2UgdGhlIGRhdGEgaW4gdGhlIHN0b3JlIGlzIHRvIGNhbGwgYGRpc3BhdGNoKClgIG9uIGl0LlxuICpcbiAqIFRoZXJlIHNob3VsZCBvbmx5IGJlIGEgc2luZ2xlIHN0b3JlIGluIHlvdXIgYXBwLiBUbyBzcGVjaWZ5IGhvdyBkaWZmZXJlbnRcbiAqIHBhcnRzIG9mIHRoZSBzdGF0ZSB0cmVlIHJlc3BvbmQgdG8gYWN0aW9ucywgeW91IG1heSBjb21iaW5lIHNldmVyYWwgcmVkdWNlcnNcbiAqIGludG8gYSBzaW5nbGUgcmVkdWNlciBmdW5jdGlvbiBieSB1c2luZyBgY29tYmluZVJlZHVjZXJzYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWR1Y2VyIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBuZXh0IHN0YXRlIHRyZWUsIGdpdmVuXG4gKiB0aGUgY3VycmVudCBzdGF0ZSB0cmVlIGFuZCB0aGUgYWN0aW9uIHRvIGhhbmRsZS5cbiAqXG4gKiBAcGFyYW0ge2FueX0gW3ByZWxvYWRlZFN0YXRlXSBUaGUgaW5pdGlhbCBzdGF0ZS4gWW91IG1heSBvcHRpb25hbGx5IHNwZWNpZnkgaXRcbiAqIHRvIGh5ZHJhdGUgdGhlIHN0YXRlIGZyb20gdGhlIHNlcnZlciBpbiB1bml2ZXJzYWwgYXBwcywgb3IgdG8gcmVzdG9yZSBhXG4gKiBwcmV2aW91c2x5IHNlcmlhbGl6ZWQgdXNlciBzZXNzaW9uLlxuICogSWYgeW91IHVzZSBgY29tYmluZVJlZHVjZXJzYCB0byBwcm9kdWNlIHRoZSByb290IHJlZHVjZXIgZnVuY3Rpb24sIHRoaXMgbXVzdCBiZVxuICogYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUgc2hhcGUgYXMgYGNvbWJpbmVSZWR1Y2Vyc2Aga2V5cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZW5oYW5jZXJdIFRoZSBzdG9yZSBlbmhhbmNlci4gWW91IG1heSBvcHRpb25hbGx5IHNwZWNpZnkgaXRcbiAqIHRvIGVuaGFuY2UgdGhlIHN0b3JlIHdpdGggdGhpcmQtcGFydHkgY2FwYWJpbGl0aWVzIHN1Y2ggYXMgbWlkZGxld2FyZSxcbiAqIHRpbWUgdHJhdmVsLCBwZXJzaXN0ZW5jZSwgZXRjLiBUaGUgb25seSBzdG9yZSBlbmhhbmNlciB0aGF0IHNoaXBzIHdpdGggUmVkdXhcbiAqIGlzIGBhcHBseU1pZGRsZXdhcmUoKWAuXG4gKlxuICogQHJldHVybnMge1N0b3JlfSBBIFJlZHV4IHN0b3JlIHRoYXQgbGV0cyB5b3UgcmVhZCB0aGUgc3RhdGUsIGRpc3BhdGNoIGFjdGlvbnNcbiAqIGFuZCBzdWJzY3JpYmUgdG8gY2hhbmdlcy5cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVTdG9yZShyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgZW5oYW5jZXIpIHtcbiAgdmFyIF9yZWYyO1xuXG4gIGlmICh0eXBlb2YgcHJlbG9hZGVkU3RhdGUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGVuaGFuY2VyID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBlbmhhbmNlciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgYXJndW1lbnRzWzNdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJdCBsb29rcyBsaWtlIHlvdSBhcmUgcGFzc2luZyBzZXZlcmFsIHN0b3JlIGVuaGFuY2VycyB0byAnICsgJ2NyZWF0ZVN0b3JlKCkuIFRoaXMgaXMgbm90IHN1cHBvcnRlZC4gSW5zdGVhZCwgY29tcG9zZSB0aGVtICcgKyAndG9nZXRoZXIgdG8gYSBzaW5nbGUgZnVuY3Rpb24uJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIHByZWxvYWRlZFN0YXRlID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBlbmhhbmNlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBlbmhhbmNlciA9IHByZWxvYWRlZFN0YXRlO1xuICAgIHByZWxvYWRlZFN0YXRlID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBlbmhhbmNlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIGVuaGFuY2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSBlbmhhbmNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIHJldHVybiBlbmhhbmNlcihjcmVhdGVTdG9yZSkocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiByZWR1Y2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgcmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICB9XG5cbiAgdmFyIGN1cnJlbnRSZWR1Y2VyID0gcmVkdWNlcjtcbiAgdmFyIGN1cnJlbnRTdGF0ZSA9IHByZWxvYWRlZFN0YXRlO1xuICB2YXIgY3VycmVudExpc3RlbmVycyA9IFtdO1xuICB2YXIgbmV4dExpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnM7XG4gIHZhciBpc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG4gIC8qKlxuICAgKiBUaGlzIG1ha2VzIGEgc2hhbGxvdyBjb3B5IG9mIGN1cnJlbnRMaXN0ZW5lcnMgc28gd2UgY2FuIHVzZVxuICAgKiBuZXh0TGlzdGVuZXJzIGFzIGEgdGVtcG9yYXJ5IGxpc3Qgd2hpbGUgZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIFRoaXMgcHJldmVudHMgYW55IGJ1Z3MgYXJvdW5kIGNvbnN1bWVycyBjYWxsaW5nXG4gICAqIHN1YnNjcmliZS91bnN1YnNjcmliZSBpbiB0aGUgbWlkZGxlIG9mIGEgZGlzcGF0Y2guXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKG5leHRMaXN0ZW5lcnMgPT09IGN1cnJlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIG5leHRMaXN0ZW5lcnMgPSBjdXJyZW50TGlzdGVuZXJzLnNsaWNlKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgc3RhdGUgdHJlZSBtYW5hZ2VkIGJ5IHRoZSBzdG9yZS5cbiAgICpcbiAgICogQHJldHVybnMge2FueX0gVGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBvZiB5b3VyIGFwcGxpY2F0aW9uLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICAgIGlmIChpc0Rpc3BhdGNoaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtYXkgbm90IGNhbGwgc3RvcmUuZ2V0U3RhdGUoKSB3aGlsZSB0aGUgcmVkdWNlciBpcyBleGVjdXRpbmcuICcgKyAnVGhlIHJlZHVjZXIgaGFzIGFscmVhZHkgcmVjZWl2ZWQgdGhlIHN0YXRlIGFzIGFuIGFyZ3VtZW50LiAnICsgJ1Bhc3MgaXQgZG93biBmcm9tIHRoZSB0b3AgcmVkdWNlciBpbnN0ZWFkIG9mIHJlYWRpbmcgaXQgZnJvbSB0aGUgc3RvcmUuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcbiAgfVxuICAvKipcbiAgICogQWRkcyBhIGNoYW5nZSBsaXN0ZW5lci4gSXQgd2lsbCBiZSBjYWxsZWQgYW55IHRpbWUgYW4gYWN0aW9uIGlzIGRpc3BhdGNoZWQsXG4gICAqIGFuZCBzb21lIHBhcnQgb2YgdGhlIHN0YXRlIHRyZWUgbWF5IHBvdGVudGlhbGx5IGhhdmUgY2hhbmdlZC4gWW91IG1heSB0aGVuXG4gICAqIGNhbGwgYGdldFN0YXRlKClgIHRvIHJlYWQgdGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBpbnNpZGUgdGhlIGNhbGxiYWNrLlxuICAgKlxuICAgKiBZb3UgbWF5IGNhbGwgYGRpc3BhdGNoKClgIGZyb20gYSBjaGFuZ2UgbGlzdGVuZXIsIHdpdGggdGhlIGZvbGxvd2luZ1xuICAgKiBjYXZlYXRzOlxuICAgKlxuICAgKiAxLiBUaGUgc3Vic2NyaXB0aW9ucyBhcmUgc25hcHNob3R0ZWQganVzdCBiZWZvcmUgZXZlcnkgYGRpc3BhdGNoKClgIGNhbGwuXG4gICAqIElmIHlvdSBzdWJzY3JpYmUgb3IgdW5zdWJzY3JpYmUgd2hpbGUgdGhlIGxpc3RlbmVycyBhcmUgYmVpbmcgaW52b2tlZCwgdGhpc1xuICAgKiB3aWxsIG5vdCBoYXZlIGFueSBlZmZlY3Qgb24gdGhlIGBkaXNwYXRjaCgpYCB0aGF0IGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzcy5cbiAgICogSG93ZXZlciwgdGhlIG5leHQgYGRpc3BhdGNoKClgIGNhbGwsIHdoZXRoZXIgbmVzdGVkIG9yIG5vdCwgd2lsbCB1c2UgYSBtb3JlXG4gICAqIHJlY2VudCBzbmFwc2hvdCBvZiB0aGUgc3Vic2NyaXB0aW9uIGxpc3QuXG4gICAqXG4gICAqIDIuIFRoZSBsaXN0ZW5lciBzaG91bGQgbm90IGV4cGVjdCB0byBzZWUgYWxsIHN0YXRlIGNoYW5nZXMsIGFzIHRoZSBzdGF0ZVxuICAgKiBtaWdodCBoYXZlIGJlZW4gdXBkYXRlZCBtdWx0aXBsZSB0aW1lcyBkdXJpbmcgYSBuZXN0ZWQgYGRpc3BhdGNoKClgIGJlZm9yZVxuICAgKiB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkLiBJdCBpcywgaG93ZXZlciwgZ3VhcmFudGVlZCB0aGF0IGFsbCBzdWJzY3JpYmVyc1xuICAgKiByZWdpc3RlcmVkIGJlZm9yZSB0aGUgYGRpc3BhdGNoKClgIHN0YXJ0ZWQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgbGF0ZXN0XG4gICAqIHN0YXRlIGJ5IHRoZSB0aW1lIGl0IGV4aXRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBBIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgb24gZXZlcnkgZGlzcGF0Y2guXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0byByZW1vdmUgdGhpcyBjaGFuZ2UgbGlzdGVuZXIuXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gc3Vic2NyaWJlKGxpc3RlbmVyKSB7XG4gICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgbGlzdGVuZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICBpZiAoaXNEaXNwYXRjaGluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbWF5IG5vdCBjYWxsIHN0b3JlLnN1YnNjcmliZSgpIHdoaWxlIHRoZSByZWR1Y2VyIGlzIGV4ZWN1dGluZy4gJyArICdJZiB5b3Ugd291bGQgbGlrZSB0byBiZSBub3RpZmllZCBhZnRlciB0aGUgc3RvcmUgaGFzIGJlZW4gdXBkYXRlZCwgc3Vic2NyaWJlIGZyb20gYSAnICsgJ2NvbXBvbmVudCBhbmQgaW52b2tlIHN0b3JlLmdldFN0YXRlKCkgaW4gdGhlIGNhbGxiYWNrIHRvIGFjY2VzcyB0aGUgbGF0ZXN0IHN0YXRlLiAnICsgJ1NlZSBodHRwczovL3JlZHV4LmpzLm9yZy9hcGktcmVmZXJlbmNlL3N0b3JlI3N1YnNjcmliZWxpc3RlbmVyIGZvciBtb3JlIGRldGFpbHMuJyk7XG4gICAgfVxuXG4gICAgdmFyIGlzU3Vic2NyaWJlZCA9IHRydWU7XG4gICAgZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpO1xuICAgIG5leHRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgICAgaWYgKCFpc1N1YnNjcmliZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNEaXNwYXRjaGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtYXkgbm90IHVuc3Vic2NyaWJlIGZyb20gYSBzdG9yZSBsaXN0ZW5lciB3aGlsZSB0aGUgcmVkdWNlciBpcyBleGVjdXRpbmcuICcgKyAnU2VlIGh0dHBzOi8vcmVkdXguanMub3JnL2FwaS1yZWZlcmVuY2Uvc3RvcmUjc3Vic2NyaWJlbGlzdGVuZXIgZm9yIG1vcmUgZGV0YWlscy4nKTtcbiAgICAgIH1cblxuICAgICAgaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICBlbnN1cmVDYW5NdXRhdGVOZXh0TGlzdGVuZXJzKCk7XG4gICAgICB2YXIgaW5kZXggPSBuZXh0TGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgbmV4dExpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgY3VycmVudExpc3RlbmVycyA9IG51bGw7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhbiBhY3Rpb24uIEl0IGlzIHRoZSBvbmx5IHdheSB0byB0cmlnZ2VyIGEgc3RhdGUgY2hhbmdlLlxuICAgKlxuICAgKiBUaGUgYHJlZHVjZXJgIGZ1bmN0aW9uLCB1c2VkIHRvIGNyZWF0ZSB0aGUgc3RvcmUsIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAqIGN1cnJlbnQgc3RhdGUgdHJlZSBhbmQgdGhlIGdpdmVuIGBhY3Rpb25gLiBJdHMgcmV0dXJuIHZhbHVlIHdpbGxcbiAgICogYmUgY29uc2lkZXJlZCB0aGUgKipuZXh0Kiogc3RhdGUgb2YgdGhlIHRyZWUsIGFuZCB0aGUgY2hhbmdlIGxpc3RlbmVyc1xuICAgKiB3aWxsIGJlIG5vdGlmaWVkLlxuICAgKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvbmx5IHN1cHBvcnRzIHBsYWluIG9iamVjdCBhY3Rpb25zLiBJZiB5b3Ugd2FudCB0b1xuICAgKiBkaXNwYXRjaCBhIFByb21pc2UsIGFuIE9ic2VydmFibGUsIGEgdGh1bmssIG9yIHNvbWV0aGluZyBlbHNlLCB5b3UgbmVlZCB0b1xuICAgKiB3cmFwIHlvdXIgc3RvcmUgY3JlYXRpbmcgZnVuY3Rpb24gaW50byB0aGUgY29ycmVzcG9uZGluZyBtaWRkbGV3YXJlLiBGb3JcbiAgICogZXhhbXBsZSwgc2VlIHRoZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgYHJlZHV4LXRodW5rYCBwYWNrYWdlLiBFdmVuIHRoZVxuICAgKiBtaWRkbGV3YXJlIHdpbGwgZXZlbnR1YWxseSBkaXNwYXRjaCBwbGFpbiBvYmplY3QgYWN0aW9ucyB1c2luZyB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFjdGlvbiBBIHBsYWluIG9iamVjdCByZXByZXNlbnRpbmcg4oCcd2hhdCBjaGFuZ2Vk4oCdLiBJdCBpc1xuICAgKiBhIGdvb2QgaWRlYSB0byBrZWVwIGFjdGlvbnMgc2VyaWFsaXphYmxlIHNvIHlvdSBjYW4gcmVjb3JkIGFuZCByZXBsYXkgdXNlclxuICAgKiBzZXNzaW9ucywgb3IgdXNlIHRoZSB0aW1lIHRyYXZlbGxpbmcgYHJlZHV4LWRldnRvb2xzYC4gQW4gYWN0aW9uIG11c3QgaGF2ZVxuICAgKiBhIGB0eXBlYCBwcm9wZXJ0eSB3aGljaCBtYXkgbm90IGJlIGB1bmRlZmluZWRgLiBJdCBpcyBhIGdvb2QgaWRlYSB0byB1c2VcbiAgICogc3RyaW5nIGNvbnN0YW50cyBmb3IgYWN0aW9uIHR5cGVzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBGb3IgY29udmVuaWVuY2UsIHRoZSBzYW1lIGFjdGlvbiBvYmplY3QgeW91IGRpc3BhdGNoZWQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCwgaWYgeW91IHVzZSBhIGN1c3RvbSBtaWRkbGV3YXJlLCBpdCBtYXkgd3JhcCBgZGlzcGF0Y2goKWAgdG9cbiAgICogcmV0dXJuIHNvbWV0aGluZyBlbHNlIChmb3IgZXhhbXBsZSwgYSBQcm9taXNlIHlvdSBjYW4gYXdhaXQpLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGRpc3BhdGNoKGFjdGlvbikge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChhY3Rpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjdGlvbnMgbXVzdCBiZSBwbGFpbiBvYmplY3RzLiAnICsgJ1VzZSBjdXN0b20gbWlkZGxld2FyZSBmb3IgYXN5bmMgYWN0aW9ucy4nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGFjdGlvbi50eXBlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY3Rpb25zIG1heSBub3QgaGF2ZSBhbiB1bmRlZmluZWQgXCJ0eXBlXCIgcHJvcGVydHkuICcgKyAnSGF2ZSB5b3UgbWlzc3BlbGxlZCBhIGNvbnN0YW50PycpO1xuICAgIH1cblxuICAgIGlmIChpc0Rpc3BhdGNoaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZHVjZXJzIG1heSBub3QgZGlzcGF0Y2ggYWN0aW9ucy4nKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgaXNEaXNwYXRjaGluZyA9IHRydWU7XG4gICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50UmVkdWNlcihjdXJyZW50U3RhdGUsIGFjdGlvbik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgbGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycyA9IG5leHRMaXN0ZW5lcnM7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgbGlzdGVuZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aW9uO1xuICB9XG4gIC8qKlxuICAgKiBSZXBsYWNlcyB0aGUgcmVkdWNlciBjdXJyZW50bHkgdXNlZCBieSB0aGUgc3RvcmUgdG8gY2FsY3VsYXRlIHRoZSBzdGF0ZS5cbiAgICpcbiAgICogWW91IG1pZ2h0IG5lZWQgdGhpcyBpZiB5b3VyIGFwcCBpbXBsZW1lbnRzIGNvZGUgc3BsaXR0aW5nIGFuZCB5b3Ugd2FudCB0b1xuICAgKiBsb2FkIHNvbWUgb2YgdGhlIHJlZHVjZXJzIGR5bmFtaWNhbGx5LiBZb3UgbWlnaHQgYWxzbyBuZWVkIHRoaXMgaWYgeW91XG4gICAqIGltcGxlbWVudCBhIGhvdCByZWxvYWRpbmcgbWVjaGFuaXNtIGZvciBSZWR1eC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFJlZHVjZXIgVGhlIHJlZHVjZXIgZm9yIHRoZSBzdG9yZSB0byB1c2UgaW5zdGVhZC5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gcmVwbGFjZVJlZHVjZXIobmV4dFJlZHVjZXIpIHtcbiAgICBpZiAodHlwZW9mIG5leHRSZWR1Y2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSBuZXh0UmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIGN1cnJlbnRSZWR1Y2VyID0gbmV4dFJlZHVjZXI7IC8vIFRoaXMgYWN0aW9uIGhhcyBhIHNpbWlsaWFyIGVmZmVjdCB0byBBY3Rpb25UeXBlcy5JTklULlxuICAgIC8vIEFueSByZWR1Y2VycyB0aGF0IGV4aXN0ZWQgaW4gYm90aCB0aGUgbmV3IGFuZCBvbGQgcm9vdFJlZHVjZXJcbiAgICAvLyB3aWxsIHJlY2VpdmUgdGhlIHByZXZpb3VzIHN0YXRlLiBUaGlzIGVmZmVjdGl2ZWx5IHBvcHVsYXRlc1xuICAgIC8vIHRoZSBuZXcgc3RhdGUgdHJlZSB3aXRoIGFueSByZWxldmFudCBkYXRhIGZyb20gdGhlIG9sZCBvbmUuXG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBY3Rpb25UeXBlcy5SRVBMQUNFXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEludGVyb3BlcmFiaWxpdHkgcG9pbnQgZm9yIG9ic2VydmFibGUvcmVhY3RpdmUgbGlicmFyaWVzLlxuICAgKiBAcmV0dXJucyB7b2JzZXJ2YWJsZX0gQSBtaW5pbWFsIG9ic2VydmFibGUgb2Ygc3RhdGUgY2hhbmdlcy5cbiAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgb2JzZXJ2YWJsZSBwcm9wb3NhbDpcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JzZXJ2YWJsZVxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGUoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgb3V0ZXJTdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgcmV0dXJuIF9yZWYgPSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBtaW5pbWFsIG9ic2VydmFibGUgc3Vic2NyaXB0aW9uIG1ldGhvZC5cbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYnNlcnZlciBBbnkgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gb2JzZXJ2ZXIuXG4gICAgICAgKiBUaGUgb2JzZXJ2ZXIgb2JqZWN0IHNob3VsZCBoYXZlIGEgYG5leHRgIG1ldGhvZC5cbiAgICAgICAqIEByZXR1cm5zIHtzdWJzY3JpcHRpb259IEFuIG9iamVjdCB3aXRoIGFuIGB1bnN1YnNjcmliZWAgbWV0aG9kIHRoYXQgY2FuXG4gICAgICAgKiBiZSB1c2VkIHRvIHVuc3Vic2NyaWJlIHRoZSBvYnNlcnZhYmxlIGZyb20gdGhlIHN0b3JlLCBhbmQgcHJldmVudCBmdXJ0aGVyXG4gICAgICAgKiBlbWlzc2lvbiBvZiB2YWx1ZXMgZnJvbSB0aGUgb2JzZXJ2YWJsZS5cbiAgICAgICAqL1xuICAgICAgc3Vic2NyaWJlOiBmdW5jdGlvbiBzdWJzY3JpYmUob2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYnNlcnZlciAhPT0gJ29iamVjdCcgfHwgb2JzZXJ2ZXIgPT09IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCB0aGUgb2JzZXJ2ZXIgdG8gYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb2JzZXJ2ZVN0YXRlKCkge1xuICAgICAgICAgIGlmIChvYnNlcnZlci5uZXh0KSB7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KGdldFN0YXRlKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9ic2VydmVTdGF0ZSgpO1xuICAgICAgICB2YXIgdW5zdWJzY3JpYmUgPSBvdXRlclN1YnNjcmliZShvYnNlcnZlU3RhdGUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHVuc3Vic2NyaWJlOiB1bnN1YnNjcmliZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sIF9yZWZbJCRvYnNlcnZhYmxlXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sIF9yZWY7XG4gIH0gLy8gV2hlbiBhIHN0b3JlIGlzIGNyZWF0ZWQsIGFuIFwiSU5JVFwiIGFjdGlvbiBpcyBkaXNwYXRjaGVkIHNvIHRoYXQgZXZlcnlcbiAgLy8gcmVkdWNlciByZXR1cm5zIHRoZWlyIGluaXRpYWwgc3RhdGUuIFRoaXMgZWZmZWN0aXZlbHkgcG9wdWxhdGVzXG4gIC8vIHRoZSBpbml0aWFsIHN0YXRlIHRyZWUuXG5cblxuICBkaXNwYXRjaCh7XG4gICAgdHlwZTogQWN0aW9uVHlwZXMuSU5JVFxuICB9KTtcbiAgcmV0dXJuIF9yZWYyID0ge1xuICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcbiAgICBzdWJzY3JpYmU6IHN1YnNjcmliZSxcbiAgICBnZXRTdGF0ZTogZ2V0U3RhdGUsXG4gICAgcmVwbGFjZVJlZHVjZXI6IHJlcGxhY2VSZWR1Y2VyXG4gIH0sIF9yZWYyWyQkb2JzZXJ2YWJsZV0gPSBvYnNlcnZhYmxlLCBfcmVmMjtcbn1cblxuLyoqXG4gKiBQcmludHMgYSB3YXJuaW5nIGluIHRoZSBjb25zb2xlIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgd2FybmluZyBtZXNzYWdlLlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHdhcm5pbmcobWVzc2FnZSkge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4gIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNvbnNvbGUuZXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICB9XG4gIC8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuXG5cbiAgdHJ5IHtcbiAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IGlmIHlvdSBlbmFibGVcbiAgICAvLyBcImJyZWFrIG9uIGFsbCBleGNlcHRpb25zXCIgaW4geW91ciBjb25zb2xlLFxuICAgIC8vIGl0IHdvdWxkIHBhdXNlIHRoZSBleGVjdXRpb24gYXQgdGhpcyBsaW5lLlxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgfSBjYXRjaCAoZSkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lbXB0eVxuXG59XG5cbmZ1bmN0aW9uIGdldFVuZGVmaW5lZFN0YXRlRXJyb3JNZXNzYWdlKGtleSwgYWN0aW9uKSB7XG4gIHZhciBhY3Rpb25UeXBlID0gYWN0aW9uICYmIGFjdGlvbi50eXBlO1xuICB2YXIgYWN0aW9uRGVzY3JpcHRpb24gPSBhY3Rpb25UeXBlICYmIFwiYWN0aW9uIFxcXCJcIiArIFN0cmluZyhhY3Rpb25UeXBlKSArIFwiXFxcIlwiIHx8ICdhbiBhY3Rpb24nO1xuICByZXR1cm4gXCJHaXZlbiBcIiArIGFjdGlvbkRlc2NyaXB0aW9uICsgXCIsIHJlZHVjZXIgXFxcIlwiICsga2V5ICsgXCJcXFwiIHJldHVybmVkIHVuZGVmaW5lZC4gXCIgKyBcIlRvIGlnbm9yZSBhbiBhY3Rpb24sIHlvdSBtdXN0IGV4cGxpY2l0bHkgcmV0dXJuIHRoZSBwcmV2aW91cyBzdGF0ZS4gXCIgKyBcIklmIHlvdSB3YW50IHRoaXMgcmVkdWNlciB0byBob2xkIG5vIHZhbHVlLCB5b3UgY2FuIHJldHVybiBudWxsIGluc3RlYWQgb2YgdW5kZWZpbmVkLlwiO1xufVxuXG5mdW5jdGlvbiBnZXRVbmV4cGVjdGVkU3RhdGVTaGFwZVdhcm5pbmdNZXNzYWdlKGlucHV0U3RhdGUsIHJlZHVjZXJzLCBhY3Rpb24sIHVuZXhwZWN0ZWRLZXlDYWNoZSkge1xuICB2YXIgcmVkdWNlcktleXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBhcmd1bWVudE5hbWUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGUgPT09IEFjdGlvblR5cGVzLklOSVQgPyAncHJlbG9hZGVkU3RhdGUgYXJndW1lbnQgcGFzc2VkIHRvIGNyZWF0ZVN0b3JlJyA6ICdwcmV2aW91cyBzdGF0ZSByZWNlaXZlZCBieSB0aGUgcmVkdWNlcic7XG5cbiAgaWYgKHJlZHVjZXJLZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAnU3RvcmUgZG9lcyBub3QgaGF2ZSBhIHZhbGlkIHJlZHVjZXIuIE1ha2Ugc3VyZSB0aGUgYXJndW1lbnQgcGFzc2VkICcgKyAndG8gY29tYmluZVJlZHVjZXJzIGlzIGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIHJlZHVjZXJzLic7XG4gIH1cblxuICBpZiAoIWlzUGxhaW5PYmplY3QoaW5wdXRTdGF0ZSkpIHtcbiAgICByZXR1cm4gXCJUaGUgXCIgKyBhcmd1bWVudE5hbWUgKyBcIiBoYXMgdW5leHBlY3RlZCB0eXBlIG9mIFxcXCJcIiArIHt9LnRvU3RyaW5nLmNhbGwoaW5wdXRTdGF0ZSkubWF0Y2goL1xccyhbYS16fEEtWl0rKS8pWzFdICsgXCJcXFwiLiBFeHBlY3RlZCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIFwiICsgKFwia2V5czogXFxcIlwiICsgcmVkdWNlcktleXMuam9pbignXCIsIFwiJykgKyBcIlxcXCJcIik7XG4gIH1cblxuICB2YXIgdW5leHBlY3RlZEtleXMgPSBPYmplY3Qua2V5cyhpbnB1dFN0YXRlKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiAhcmVkdWNlcnMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAhdW5leHBlY3RlZEtleUNhY2hlW2tleV07XG4gIH0pO1xuICB1bmV4cGVjdGVkS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB1bmV4cGVjdGVkS2V5Q2FjaGVba2V5XSA9IHRydWU7XG4gIH0pO1xuICBpZiAoYWN0aW9uICYmIGFjdGlvbi50eXBlID09PSBBY3Rpb25UeXBlcy5SRVBMQUNFKSByZXR1cm47XG5cbiAgaWYgKHVuZXhwZWN0ZWRLZXlzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gXCJVbmV4cGVjdGVkIFwiICsgKHVuZXhwZWN0ZWRLZXlzLmxlbmd0aCA+IDEgPyAna2V5cycgOiAna2V5JykgKyBcIiBcIiArIChcIlxcXCJcIiArIHVuZXhwZWN0ZWRLZXlzLmpvaW4oJ1wiLCBcIicpICsgXCJcXFwiIGZvdW5kIGluIFwiICsgYXJndW1lbnROYW1lICsgXCIuIFwiKSArIFwiRXhwZWN0ZWQgdG8gZmluZCBvbmUgb2YgdGhlIGtub3duIHJlZHVjZXIga2V5cyBpbnN0ZWFkOiBcIiArIChcIlxcXCJcIiArIHJlZHVjZXJLZXlzLmpvaW4oJ1wiLCBcIicpICsgXCJcXFwiLiBVbmV4cGVjdGVkIGtleXMgd2lsbCBiZSBpZ25vcmVkLlwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRSZWR1Y2VyU2hhcGUocmVkdWNlcnMpIHtcbiAgT2JqZWN0LmtleXMocmVkdWNlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciByZWR1Y2VyID0gcmVkdWNlcnNba2V5XTtcbiAgICB2YXIgaW5pdGlhbFN0YXRlID0gcmVkdWNlcih1bmRlZmluZWQsIHtcbiAgICAgIHR5cGU6IEFjdGlvblR5cGVzLklOSVRcbiAgICB9KTtcblxuICAgIGlmICh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVkdWNlciBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgcmV0dXJuZWQgdW5kZWZpbmVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4gXCIgKyBcIklmIHRoZSBzdGF0ZSBwYXNzZWQgdG8gdGhlIHJlZHVjZXIgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCBcIiArIFwiZXhwbGljaXRseSByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUuIFRoZSBpbml0aWFsIHN0YXRlIG1heSBcIiArIFwibm90IGJlIHVuZGVmaW5lZC4gSWYgeW91IGRvbid0IHdhbnQgdG8gc2V0IGEgdmFsdWUgZm9yIHRoaXMgcmVkdWNlciwgXCIgKyBcInlvdSBjYW4gdXNlIG51bGwgaW5zdGVhZCBvZiB1bmRlZmluZWQuXCIpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcmVkdWNlcih1bmRlZmluZWQsIHtcbiAgICAgIHR5cGU6IEFjdGlvblR5cGVzLlBST0JFX1VOS05PV05fQUNUSU9OKClcbiAgICB9KSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlZHVjZXIgXFxcIlwiICsga2V5ICsgXCJcXFwiIHJldHVybmVkIHVuZGVmaW5lZCB3aGVuIHByb2JlZCB3aXRoIGEgcmFuZG9tIHR5cGUuIFwiICsgKFwiRG9uJ3QgdHJ5IHRvIGhhbmRsZSBcIiArIEFjdGlvblR5cGVzLklOSVQgKyBcIiBvciBvdGhlciBhY3Rpb25zIGluIFxcXCJyZWR1eC8qXFxcIiBcIikgKyBcIm5hbWVzcGFjZS4gVGhleSBhcmUgY29uc2lkZXJlZCBwcml2YXRlLiBJbnN0ZWFkLCB5b3UgbXVzdCByZXR1cm4gdGhlIFwiICsgXCJjdXJyZW50IHN0YXRlIGZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB1bmxlc3MgaXQgaXMgdW5kZWZpbmVkLCBcIiArIFwiaW4gd2hpY2ggY2FzZSB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUsIHJlZ2FyZGxlc3Mgb2YgdGhlIFwiICsgXCJhY3Rpb24gdHlwZS4gVGhlIGluaXRpYWwgc3RhdGUgbWF5IG5vdCBiZSB1bmRlZmluZWQsIGJ1dCBjYW4gYmUgbnVsbC5cIik7XG4gICAgfVxuICB9KTtcbn1cbi8qKlxuICogVHVybnMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgZGlmZmVyZW50IHJlZHVjZXIgZnVuY3Rpb25zLCBpbnRvIGEgc2luZ2xlXG4gKiByZWR1Y2VyIGZ1bmN0aW9uLiBJdCB3aWxsIGNhbGwgZXZlcnkgY2hpbGQgcmVkdWNlciwgYW5kIGdhdGhlciB0aGVpciByZXN1bHRzXG4gKiBpbnRvIGEgc2luZ2xlIHN0YXRlIG9iamVjdCwgd2hvc2Uga2V5cyBjb3JyZXNwb25kIHRvIHRoZSBrZXlzIG9mIHRoZSBwYXNzZWRcbiAqIHJlZHVjZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSByZWR1Y2VycyBBbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGNvcnJlc3BvbmQgdG8gZGlmZmVyZW50XG4gKiByZWR1Y2VyIGZ1bmN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgY29tYmluZWQgaW50byBvbmUuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluXG4gKiBpdCBpcyB0byB1c2UgRVM2IGBpbXBvcnQgKiBhcyByZWR1Y2Vyc2Agc3ludGF4LiBUaGUgcmVkdWNlcnMgbWF5IG5ldmVyIHJldHVyblxuICogdW5kZWZpbmVkIGZvciBhbnkgYWN0aW9uLiBJbnN0ZWFkLCB0aGV5IHNob3VsZCByZXR1cm4gdGhlaXIgaW5pdGlhbCBzdGF0ZVxuICogaWYgdGhlIHN0YXRlIHBhc3NlZCB0byB0aGVtIHdhcyB1bmRlZmluZWQsIGFuZCB0aGUgY3VycmVudCBzdGF0ZSBmb3IgYW55XG4gKiB1bnJlY29nbml6ZWQgYWN0aW9uLlxuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSByZWR1Y2VyIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBldmVyeSByZWR1Y2VyIGluc2lkZSB0aGVcbiAqIHBhc3NlZCBvYmplY3QsIGFuZCBidWlsZHMgYSBzdGF0ZSBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzaGFwZS5cbiAqL1xuXG5cbmZ1bmN0aW9uIGNvbWJpbmVSZWR1Y2VycyhyZWR1Y2Vycykge1xuICB2YXIgcmVkdWNlcktleXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBmaW5hbFJlZHVjZXJzID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWR1Y2VyS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSByZWR1Y2VyS2V5c1tpXTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIHJlZHVjZXJzW2tleV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHdhcm5pbmcoXCJObyByZWR1Y2VyIHByb3ZpZGVkIGZvciBrZXkgXFxcIlwiICsga2V5ICsgXCJcXFwiXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcmVkdWNlcnNba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZmluYWxSZWR1Y2Vyc1trZXldID0gcmVkdWNlcnNba2V5XTtcbiAgICB9XG4gIH1cblxuICB2YXIgZmluYWxSZWR1Y2VyS2V5cyA9IE9iamVjdC5rZXlzKGZpbmFsUmVkdWNlcnMpOyAvLyBUaGlzIGlzIHVzZWQgdG8gbWFrZSBzdXJlIHdlIGRvbid0IHdhcm4gYWJvdXQgdGhlIHNhbWVcbiAgLy8ga2V5cyBtdWx0aXBsZSB0aW1lcy5cblxuICB2YXIgdW5leHBlY3RlZEtleUNhY2hlO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdW5leHBlY3RlZEtleUNhY2hlID0ge307XG4gIH1cblxuICB2YXIgc2hhcGVBc3NlcnRpb25FcnJvcjtcblxuICB0cnkge1xuICAgIGFzc2VydFJlZHVjZXJTaGFwZShmaW5hbFJlZHVjZXJzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHNoYXBlQXNzZXJ0aW9uRXJyb3IgPSBlO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNvbWJpbmF0aW9uKHN0YXRlLCBhY3Rpb24pIHtcbiAgICBpZiAoc3RhdGUgPT09IHZvaWQgMCkge1xuICAgICAgc3RhdGUgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoc2hhcGVBc3NlcnRpb25FcnJvcikge1xuICAgICAgdGhyb3cgc2hhcGVBc3NlcnRpb25FcnJvcjtcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIHdhcm5pbmdNZXNzYWdlID0gZ2V0VW5leHBlY3RlZFN0YXRlU2hhcGVXYXJuaW5nTWVzc2FnZShzdGF0ZSwgZmluYWxSZWR1Y2VycywgYWN0aW9uLCB1bmV4cGVjdGVkS2V5Q2FjaGUpO1xuXG4gICAgICBpZiAod2FybmluZ01lc3NhZ2UpIHtcbiAgICAgICAgd2FybmluZyh3YXJuaW5nTWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICB2YXIgbmV4dFN0YXRlID0ge307XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgZmluYWxSZWR1Y2VyS2V5cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfa2V5ID0gZmluYWxSZWR1Y2VyS2V5c1tfaV07XG4gICAgICB2YXIgcmVkdWNlciA9IGZpbmFsUmVkdWNlcnNbX2tleV07XG4gICAgICB2YXIgcHJldmlvdXNTdGF0ZUZvcktleSA9IHN0YXRlW19rZXldO1xuICAgICAgdmFyIG5leHRTdGF0ZUZvcktleSA9IHJlZHVjZXIocHJldmlvdXNTdGF0ZUZvcktleSwgYWN0aW9uKTtcblxuICAgICAgaWYgKHR5cGVvZiBuZXh0U3RhdGVGb3JLZXkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBnZXRVbmRlZmluZWRTdGF0ZUVycm9yTWVzc2FnZShfa2V5LCBhY3Rpb24pO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgIH1cblxuICAgICAgbmV4dFN0YXRlW19rZXldID0gbmV4dFN0YXRlRm9yS2V5O1xuICAgICAgaGFzQ2hhbmdlZCA9IGhhc0NoYW5nZWQgfHwgbmV4dFN0YXRlRm9yS2V5ICE9PSBwcmV2aW91c1N0YXRlRm9yS2V5O1xuICAgIH1cblxuICAgIGhhc0NoYW5nZWQgPSBoYXNDaGFuZ2VkIHx8IGZpbmFsUmVkdWNlcktleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhzdGF0ZSkubGVuZ3RoO1xuICAgIHJldHVybiBoYXNDaGFuZ2VkID8gbmV4dFN0YXRlIDogc3RhdGU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IsIGRpc3BhdGNoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKGFjdGlvbkNyZWF0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG4vKipcbiAqIFR1cm5zIGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvbiBjcmVhdG9ycywgaW50byBhbiBvYmplY3Qgd2l0aCB0aGVcbiAqIHNhbWUga2V5cywgYnV0IHdpdGggZXZlcnkgZnVuY3Rpb24gd3JhcHBlZCBpbnRvIGEgYGRpc3BhdGNoYCBjYWxsIHNvIHRoZXlcbiAqIG1heSBiZSBpbnZva2VkIGRpcmVjdGx5LiBUaGlzIGlzIGp1c3QgYSBjb252ZW5pZW5jZSBtZXRob2QsIGFzIHlvdSBjYW4gY2FsbFxuICogYHN0b3JlLmRpc3BhdGNoKE15QWN0aW9uQ3JlYXRvcnMuZG9Tb21ldGhpbmcoKSlgIHlvdXJzZWxmIGp1c3QgZmluZS5cbiAqXG4gKiBGb3IgY29udmVuaWVuY2UsIHlvdSBjYW4gYWxzbyBwYXNzIGFuIGFjdGlvbiBjcmVhdG9yIGFzIHRoZSBmaXJzdCBhcmd1bWVudCxcbiAqIGFuZCBnZXQgYSBkaXNwYXRjaCB3cmFwcGVkIGZ1bmN0aW9uIGluIHJldHVybi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdH0gYWN0aW9uQ3JlYXRvcnMgQW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgYWN0aW9uXG4gKiBjcmVhdG9yIGZ1bmN0aW9ucy4gT25lIGhhbmR5IHdheSB0byBvYnRhaW4gaXQgaXMgdG8gdXNlIEVTNiBgaW1wb3J0ICogYXNgXG4gKiBzeW50YXguIFlvdSBtYXkgYWxzbyBwYXNzIGEgc2luZ2xlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGRpc3BhdGNoIFRoZSBgZGlzcGF0Y2hgIGZ1bmN0aW9uIGF2YWlsYWJsZSBvbiB5b3VyIFJlZHV4XG4gKiBzdG9yZS5cbiAqXG4gKiBAcmV0dXJucyB7RnVuY3Rpb258T2JqZWN0fSBUaGUgb2JqZWN0IG1pbWlja2luZyB0aGUgb3JpZ2luYWwgb2JqZWN0LCBidXQgd2l0aFxuICogZXZlcnkgYWN0aW9uIGNyZWF0b3Igd3JhcHBlZCBpbnRvIHRoZSBgZGlzcGF0Y2hgIGNhbGwuIElmIHlvdSBwYXNzZWQgYVxuICogZnVuY3Rpb24gYXMgYGFjdGlvbkNyZWF0b3JzYCwgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGFsc28gYmUgYSBzaW5nbGVcbiAqIGZ1bmN0aW9uLlxuICovXG5cblxuZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3JzKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCkge1xuICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3JzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCk7XG4gIH1cblxuICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3JzICE9PSAnb2JqZWN0JyB8fCBhY3Rpb25DcmVhdG9ycyA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImJpbmRBY3Rpb25DcmVhdG9ycyBleHBlY3RlZCBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbiwgaW5zdGVhZCByZWNlaXZlZCBcIiArIChhY3Rpb25DcmVhdG9ycyA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBhY3Rpb25DcmVhdG9ycykgKyBcIi4gXCIgKyBcIkRpZCB5b3Ugd3JpdGUgXFxcImltcG9ydCBBY3Rpb25DcmVhdG9ycyBmcm9tXFxcIiBpbnN0ZWFkIG9mIFxcXCJpbXBvcnQgKiBhcyBBY3Rpb25DcmVhdG9ycyBmcm9tXFxcIj9cIik7XG4gIH1cblxuICB2YXIgYm91bmRBY3Rpb25DcmVhdG9ycyA9IHt9O1xuXG4gIGZvciAodmFyIGtleSBpbiBhY3Rpb25DcmVhdG9ycykge1xuICAgIHZhciBhY3Rpb25DcmVhdG9yID0gYWN0aW9uQ3JlYXRvcnNba2V5XTtcblxuICAgIGlmICh0eXBlb2YgYWN0aW9uQ3JlYXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYm91bmRBY3Rpb25DcmVhdG9yc1trZXldID0gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvciwgZGlzcGF0Y2gpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBib3VuZEFjdGlvbkNyZWF0b3JzO1xufVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCkpO1xuICB9XG5cbiAgaWYgKGVudW1lcmFibGVPbmx5KSBrZXlzID0ga2V5cy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlO1xuICB9KTtcbiAgcmV0dXJuIGtleXM7XG59XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9O1xuXG4gICAgaWYgKGkgJSAyKSB7XG4gICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qKlxuICogQ29tcG9zZXMgc2luZ2xlLWFyZ3VtZW50IGZ1bmN0aW9ucyBmcm9tIHJpZ2h0IHRvIGxlZnQuIFRoZSByaWdodG1vc3RcbiAqIGZ1bmN0aW9uIGNhbiB0YWtlIG11bHRpcGxlIGFyZ3VtZW50cyBhcyBpdCBwcm92aWRlcyB0aGUgc2lnbmF0dXJlIGZvclxuICogdGhlIHJlc3VsdGluZyBjb21wb3NpdGUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gZnVuY3MgVGhlIGZ1bmN0aW9ucyB0byBjb21wb3NlLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIG9idGFpbmVkIGJ5IGNvbXBvc2luZyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zXG4gKiBmcm9tIHJpZ2h0IHRvIGxlZnQuIEZvciBleGFtcGxlLCBjb21wb3NlKGYsIGcsIGgpIGlzIGlkZW50aWNhbCB0byBkb2luZ1xuICogKC4uLmFyZ3MpID0+IGYoZyhoKC4uLmFyZ3MpKSkuXG4gKi9cbmZ1bmN0aW9uIGNvbXBvc2UoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBmdW5jc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIGlmIChmdW5jcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFyZykge1xuICAgICAgcmV0dXJuIGFyZztcbiAgICB9O1xuICB9XG5cbiAgaWYgKGZ1bmNzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBmdW5jc1swXTtcbiAgfVxuXG4gIHJldHVybiBmdW5jcy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGEoYi5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cykpO1xuICAgIH07XG4gIH0pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBzdG9yZSBlbmhhbmNlciB0aGF0IGFwcGxpZXMgbWlkZGxld2FyZSB0byB0aGUgZGlzcGF0Y2ggbWV0aG9kXG4gKiBvZiB0aGUgUmVkdXggc3RvcmUuIFRoaXMgaXMgaGFuZHkgZm9yIGEgdmFyaWV0eSBvZiB0YXNrcywgc3VjaCBhcyBleHByZXNzaW5nXG4gKiBhc3luY2hyb25vdXMgYWN0aW9ucyBpbiBhIGNvbmNpc2UgbWFubmVyLCBvciBsb2dnaW5nIGV2ZXJ5IGFjdGlvbiBwYXlsb2FkLlxuICpcbiAqIFNlZSBgcmVkdXgtdGh1bmtgIHBhY2thZ2UgYXMgYW4gZXhhbXBsZSBvZiB0aGUgUmVkdXggbWlkZGxld2FyZS5cbiAqXG4gKiBCZWNhdXNlIG1pZGRsZXdhcmUgaXMgcG90ZW50aWFsbHkgYXN5bmNocm9ub3VzLCB0aGlzIHNob3VsZCBiZSB0aGUgZmlyc3RcbiAqIHN0b3JlIGVuaGFuY2VyIGluIHRoZSBjb21wb3NpdGlvbiBjaGFpbi5cbiAqXG4gKiBOb3RlIHRoYXQgZWFjaCBtaWRkbGV3YXJlIHdpbGwgYmUgZ2l2ZW4gdGhlIGBkaXNwYXRjaGAgYW5kIGBnZXRTdGF0ZWAgZnVuY3Rpb25zXG4gKiBhcyBuYW1lZCBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gbWlkZGxld2FyZXMgVGhlIG1pZGRsZXdhcmUgY2hhaW4gdG8gYmUgYXBwbGllZC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBzdG9yZSBlbmhhbmNlciBhcHBseWluZyB0aGUgbWlkZGxld2FyZS5cbiAqL1xuXG5mdW5jdGlvbiBhcHBseU1pZGRsZXdhcmUoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBtaWRkbGV3YXJlcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBtaWRkbGV3YXJlc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoY3JlYXRlU3RvcmUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHN0b3JlID0gY3JlYXRlU3RvcmUuYXBwbHkodm9pZCAwLCBhcmd1bWVudHMpO1xuXG4gICAgICB2YXIgX2Rpc3BhdGNoID0gZnVuY3Rpb24gZGlzcGF0Y2goKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRGlzcGF0Y2hpbmcgd2hpbGUgY29uc3RydWN0aW5nIHlvdXIgbWlkZGxld2FyZSBpcyBub3QgYWxsb3dlZC4gJyArICdPdGhlciBtaWRkbGV3YXJlIHdvdWxkIG5vdCBiZSBhcHBsaWVkIHRvIHRoaXMgZGlzcGF0Y2guJyk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgbWlkZGxld2FyZUFQSSA9IHtcbiAgICAgICAgZ2V0U3RhdGU6IHN0b3JlLmdldFN0YXRlLFxuICAgICAgICBkaXNwYXRjaDogZnVuY3Rpb24gZGlzcGF0Y2goKSB7XG4gICAgICAgICAgcmV0dXJuIF9kaXNwYXRjaC5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgY2hhaW4gPSBtaWRkbGV3YXJlcy5tYXAoZnVuY3Rpb24gKG1pZGRsZXdhcmUpIHtcbiAgICAgICAgcmV0dXJuIG1pZGRsZXdhcmUobWlkZGxld2FyZUFQSSk7XG4gICAgICB9KTtcbiAgICAgIF9kaXNwYXRjaCA9IGNvbXBvc2UuYXBwbHkodm9pZCAwLCBjaGFpbikoc3RvcmUuZGlzcGF0Y2gpO1xuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKHt9LCBzdG9yZSwge1xuICAgICAgICBkaXNwYXRjaDogX2Rpc3BhdGNoXG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xufVxuXG4vKlxuICogVGhpcyBpcyBhIGR1bW15IGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHRoZSBmdW5jdGlvbiBuYW1lIGhhcyBiZWVuIGFsdGVyZWQgYnkgbWluaWZpY2F0aW9uLlxuICogSWYgdGhlIGZ1bmN0aW9uIGhhcyBiZWVuIG1pbmlmaWVkIGFuZCBOT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLCB3YXJuIHRoZSB1c2VyLlxuICovXG5cbmZ1bmN0aW9uIGlzQ3J1c2hlZCgpIHt9XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHR5cGVvZiBpc0NydXNoZWQubmFtZSA9PT0gJ3N0cmluZycgJiYgaXNDcnVzaGVkLm5hbWUgIT09ICdpc0NydXNoZWQnKSB7XG4gIHdhcm5pbmcoJ1lvdSBhcmUgY3VycmVudGx5IHVzaW5nIG1pbmlmaWVkIGNvZGUgb3V0c2lkZSBvZiBOT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIuICcgKyAnVGhpcyBtZWFucyB0aGF0IHlvdSBhcmUgcnVubmluZyBhIHNsb3dlciBkZXZlbG9wbWVudCBidWlsZCBvZiBSZWR1eC4gJyArICdZb3UgY2FuIHVzZSBsb29zZS1lbnZpZnkgKGh0dHBzOi8vZ2l0aHViLmNvbS96ZXJ0b3NoL2xvb3NlLWVudmlmeSkgZm9yIGJyb3dzZXJpZnkgJyArICdvciBzZXR0aW5nIG1vZGUgdG8gcHJvZHVjdGlvbiBpbiB3ZWJwYWNrIChodHRwczovL3dlYnBhY2suanMub3JnL2NvbmNlcHRzL21vZGUvKSAnICsgJ3RvIGVuc3VyZSB5b3UgaGF2ZSB0aGUgY29ycmVjdCBjb2RlIGZvciB5b3VyIHByb2R1Y3Rpb24gYnVpbGQuJyk7XG59XG5cbmV4cG9ydCB7IEFjdGlvblR5cGVzIGFzIF9fRE9fTk9UX1VTRV9fQWN0aW9uVHlwZXMsIGFwcGx5TWlkZGxld2FyZSwgYmluZEFjdGlvbkNyZWF0b3JzLCBjb21iaW5lUmVkdWNlcnMsIGNvbXBvc2UsIGNyZWF0ZVN0b3JlIH07XG4iLCIvKiBnbG9iYWwgd2luZG93ICovXG5pbXBvcnQgcG9ueWZpbGwgZnJvbSAnLi9wb255ZmlsbC5qcyc7XG5cbnZhciByb290O1xuXG5pZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBzZWxmO1xufSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gd2luZG93O1xufSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gZ2xvYmFsO1xufSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gbW9kdWxlO1xufSBlbHNlIHtcbiAgcm9vdCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG59XG5cbnZhciByZXN1bHQgPSBwb255ZmlsbChyb290KTtcbmV4cG9ydCBkZWZhdWx0IHJlc3VsdDtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN5bWJvbE9ic2VydmFibGVQb255ZmlsbChyb290KSB7XG5cdHZhciByZXN1bHQ7XG5cdHZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblxuXHRpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGlmIChTeW1ib2wub2JzZXJ2YWJsZSkge1xuXHRcdFx0cmVzdWx0ID0gU3ltYm9sLm9ic2VydmFibGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9IFN5bWJvbCgnb2JzZXJ2YWJsZScpO1xuXHRcdFx0U3ltYm9sLm9ic2VydmFibGUgPSByZXN1bHQ7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHJlc3VsdCA9ICdAQG9ic2VydmFibGUnO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG4iLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGNvbXBvc2UgPSByZXF1aXJlKCdyZWR1eCcpLmNvbXBvc2U7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmNvbXBvc2VXaXRoRGV2VG9vbHMgPSAoXG4gIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX18gP1xuICAgIHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX18gOlxuICAgIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ29iamVjdCcpIHJldHVybiBjb21wb3NlO1xuICAgICAgcmV0dXJuIGNvbXBvc2UuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9XG4pO1xuXG5leHBvcnRzLmRldlRvb2xzRW5oYW5jZXIgPSAoXG4gIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9fID9cbiAgICB3aW5kb3cuX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fXyA6XG4gICAgZnVuY3Rpb24oKSB7IHJldHVybiBmdW5jdGlvbihub29wKSB7IHJldHVybiBub29wOyB9IH1cbik7XG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9yaWdpbmFsTW9kdWxlKSB7XG5cdGlmICghb3JpZ2luYWxNb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XG5cdFx0dmFyIG1vZHVsZSA9IE9iamVjdC5jcmVhdGUob3JpZ2luYWxNb2R1bGUpO1xuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImxvYWRlZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5sO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwiaWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUuaTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImV4cG9ydHNcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZVxuXHRcdH0pO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59O1xuIiwiY29uc3QgcGxheWVyRW51bXMgPSB7XG4gICAgUExBWUlORzogXCJQTEFZSU5HXCIsXG4gICAgU1RPUFBFRDogXCJTVE9QUEVEXCIsXG4gICAgUEFVU0VEOiBcIlBBVVNFRFwiLFxuICAgIFNFRUtJTkc6IFwiU0VFS0lOR1wiLFxuICAgIFNUQUxMRUQ6IFwiU1RBTExFRFwiLFxuICAgIEVOREVEOiBcIkVOREVEXCJcbn1cblxuY29uc3QgcGxheWVyQWN0aW9ucyA9IHtcbiAgICBUSU1FX1VQREFURTogXCJUSU1FX1VQREFURVwiLFxuICAgIEFCU09MVVRFX1RJTUVfVVBEQVRFOiBcIkFCU09MVVRFX1RJTUVfVVBEQVRFXCIsXG4gICAgU0VUX0JFQUNPTjogXCJTRVRfQkVBQ09OXCIsXG4gICAgQ0xFQVJfQkVBQ09OUzogXCJDTEVBUl9CRUFDT05TXCIsXG4gICAgUExBWV9TVEFURTogXCJQTEFZX1NUQVRFXCIsXG4gICAgUEFVU0VfU1RBVEU6IFwiUEFVU0VfU1RBVEVcIixcbiAgICBTVEFMTEVEX1NUQVRFOiBcIlNUQUxMRURfU1RBVEVcIixcbiAgICBTRUVLSU5HX1NUQVRFOiBcIlNFRUtJTkdfU1RBVEVcIixcbiAgICBTVE9QUEVEX1NUQVRFOiBcIlNUT1BQRURfU1RBVEVcIixcbiAgICBORVhUX0NMSVA6IFwiTkVYVF9DTElQXCIsXG4gICAgUFJFVl9DTElQOiBcIlBSRVZfQ0xJUFwiLFxuICAgIFNXSVRDSF9DTElQOiBcIlNXSVRDSF9DTElQXCIsXG4gICAgQ0xJUExJU1RfVVBEQVRFOiBcIkNMSVBMSVNUX1VQREFURVwiLFxuICAgIENMSVBfRU5ERUQ6IFwiQ0xJUF9FTkRFRFwiLFxuICAgIFNFVF9USU1FX1NISUZUQUJMRTogXCJTRVRfVElNRV9TSElGVEFCTEVcIlxufVxuXG5jb25zdCBiZWFjb25UeXBlcyA9IHtcbiAgICBERUZBVUxUX0lNUFJFU1NJT046IFwiZGVmYXVsdEltcHJlc3Npb25cIixcbiAgICBGSVJTVF9RVUFSVElMRTogXCJmaXJzdFF1YXJ0aWxlXCIsXG4gICAgTUlEV0FZOiBcIm1pZHdheVwiLFxuICAgIFRISVJEX1FVQVJUSUxFOiBcInRoaXJkUXVhcnRpbGVcIixcbiAgICBDT01QTEVURTogXCJjb21wbGV0ZVwiXG59XG5cbmV4cG9ydCB7XG4gICAgcGxheWVyRW51bXMsXG4gICAgcGxheWVyQWN0aW9ucyxcbiAgICBiZWFjb25UeXBlc1xufSIsImltcG9ydCB7IHBsYXllckFjdGlvbnMgfSBmcm9tICcuLi90eXBlcy9wbGF5ZXJFbnVtcyc7XG5cbmNvbnN0IHRpbWVVcGRhdGUgPSAobXNJbmNyZW1lbnQsIHBsYXllclRpbWUpID0+ICh7XG4gICAgdHlwZTogcGxheWVyQWN0aW9ucy5USU1FX1VQREFURSxcbiAgICBtc0luY3JlbWVudCxcbiAgICBwbGF5ZXJUaW1lXG59KTtcblxuY29uc3Qgc2V0QWJvc2x1dGVUaW1lbGluZSA9IChuZXdUaW1lKSA9PiAoe1xuICAgIHR5cGU6IHBsYXllckFjdGlvbnMuQUJTT0xVVEVfVElNRV9VUERBVEUsXG4gICAgcGF5bG9hZDogbmV3VGltZVxufSk7XG5cbmNvbnN0IHNldEJlYWNvbiA9IChiZWFjb24pID0+ICh7XG4gICAgdHlwZTogcGxheWVyQWN0aW9ucy5TRVRfQkVBQ09OLFxuICAgIHBheWxvYWQ6IGJlYWNvblxufSk7XG5cbmNvbnN0IGNsZWFyQmVhY29ucyA9ICgpID0+ICh7XG4gICAgdHlwZTogcGxheWVyQWN0aW9ucy5DTEVBUl9CRUFDT05TXG59KTtcblxuY29uc3Qgc2V0VGltZVNoaWZ0YWJsZSA9ICh0aW1lU2hpZnRhYmxlKSA9PiAoe1xuICAgIHR5cGU6IHBsYXllckFjdGlvbnMuU0VUX1RJTUVfU0hJRlRBQkxFLFxuICAgIHBheWxvYWQ6IHRpbWVTaGlmdGFibGVcbn0pXG5cbmNvbnN0IHBsYXlTdGF0ZSA9ICgpID0+ICh7XG4gICAgdHlwZTogcGxheWVyQWN0aW9ucy5QTEFZX1NUQVRFXG59KTtcblxuY29uc3QgcGF1c2VTdGF0ZSA9ICgpID0+ICh7XG4gICAgdHlwZTogcGxheWVyQWN0aW9ucy5QQVVTRV9TVEFURVxufSk7XG5cbmNvbnN0IHN0YWxsZWRTdGF0ZSA9ICgpID0+ICh7XG4gICAgdHlwZTogcGxheWVyQWN0aW9ucy5TVEFMTEVEX1NUQVRFXG59KTtcblxuY29uc3Qgc3RvcHBlZFN0YXRlID0gKCkgPT4gKHtcbiAgICB0eXBlOiBwbGF5ZXJBY3Rpb25zLlNUT1BQRURfU1RBVEVcbn0pO1xuXG5jb25zdCBzZWVraW5nU3RhdGUgPSAoKSA9PiAoe1xuICAgIHR5cGU6IHBsYXllckFjdGlvbnMuU0VFS0lOR19TVEFURVxufSk7XG5cbmNvbnN0IG5leHRDbGlwID0gKCkgPT4gKHtcbiAgICB0eXBlOiBwbGF5ZXJBY3Rpb25zLk5FWFRfQ0xJUFxufSk7XG5cbmNvbnN0IHByZXZDbGlwID0gKCkgPT4gKHtcbiAgICB0eXBlOiBwbGF5ZXJBY3Rpb25zLlBSRVZfQ0xJUFxufSk7XG5cbmNvbnN0IHN3aXRjaENsaXAgPSAoY2xpcEluZGV4KSA9PiAoe1xuICAgIHR5cGU6IHBsYXllckFjdGlvbnMuU1dJVENIX0NMSVAsXG4gICAgY2xpcEluZGV4XG59KTtcblxuY29uc3QgY2xpcEVuZGVkID0gKCkgPT4gKHtcbiAgICB0eXBlOiBwbGF5ZXJBY3Rpb25zLkNMSVBfRU5ERURcbn0pXG5cbmNvbnN0IHVwZGF0ZUNsaXBMaXN0ID0gKGNsaXBMaXN0LCBjdXJyZW50Q2xpcEluZGV4KSA9PiAoe1xuICAgIHR5cGU6IHBsYXllckFjdGlvbnMuQ0xJUExJU1RfVVBEQVRFLFxuICAgIGFzc2V0Q2xpcExpc3Q6IHtcbiAgICAgICAgY2xpcExpc3QsXG4gICAgICAgIGN1cnJlbnRDbGlwSW5kZXhcbiAgICB9XG59KTtcblxuZXhwb3J0IHtcbiAgICB0aW1lVXBkYXRlLFxuICAgIHNldEFib3NsdXRlVGltZWxpbmUsXG4gICAgc2V0QmVhY29uLFxuICAgIGNsZWFyQmVhY29ucyxcbiAgICBzZXRUaW1lU2hpZnRhYmxlLFxuICAgIHBsYXlTdGF0ZSxcbiAgICBwYXVzZVN0YXRlLFxuICAgIHN0YWxsZWRTdGF0ZSxcbiAgICBzdG9wcGVkU3RhdGUsXG4gICAgc2Vla2luZ1N0YXRlLFxuICAgIG5leHRDbGlwLFxuICAgIHByZXZDbGlwLFxuICAgIHN3aXRjaENsaXAsXG4gICAgdXBkYXRlQ2xpcExpc3QsXG4gICAgY2xpcEVuZGVkXG59IiwiY29uc3QgZ2V0V2hvbGVQbGF5ZXJUaW1lID0gZnVuY3Rpb24ocGxheWVyVGltZSkge1xuICAgIHJldHVybiBNYXRoLmNlaWwocGxheWVyVGltZS8xMDApICogMTAwO1xufVxuXG5jb25zdCBjb252ZXJ0VG9NaWxsaXNlY29uZHMgPSBmdW5jdGlvbih0aW1lKSB7XG4gICAgcmV0dXJuIHRpbWUgKiAxMDAwO1xufVxuXG5jb25zdCBjb252ZXJ0VG9TZWNvbmRzID0gZnVuY3Rpb24odGltZSkge1xuICAgIHJldHVybiB0aW1lIC8gMTAwMDtcbn1cblxuZXhwb3J0IHtcbiAgICBnZXRXaG9sZVBsYXllclRpbWUsXG4gICAgY29udmVydFRvTWlsbGlzZWNvbmRzLFxuICAgIGNvbnZlcnRUb1NlY29uZHNcbn0iLCJpbXBvcnQgeyBjb21iaW5lUmVkdWNlcnMgfSBmcm9tICdyZWR1eCc7XG5pbXBvcnQgeyBwbGF5ZXJFbnVtcywgcGxheWVyQWN0aW9ucyB9IGZyb20gJy4uL3R5cGVzL3BsYXllckVudW1zLmpzJ1xuXG5jb25zdCB0aW1lbGluZVJlZHVjZXIgPSAodGltZU9iamVjdCA9IHthcGpzVGltZTogMCwgcGxheWVyVGltZTogMCwgYmVhY29uczogW10sIHRpbWVTaGlmdGFibGU6IHRydWV9LCBhY3Rpb24pID0+IHtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgcGxheWVyQWN0aW9ucy5USU1FX1VQREFURTpcbiAgICAgICAgICAgIHRpbWVPYmplY3QuYXBqc1RpbWUgKz0gYWN0aW9uLm1zSW5jcmVtZW50O1xuICAgICAgICAgICAgdGltZU9iamVjdC5wbGF5ZXJUaW1lID0gYWN0aW9uLnBsYXllclRpbWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBwbGF5ZXJBY3Rpb25zLkFCU09MVVRFX1RJTUVfVVBEQVRFOlxuICAgICAgICAgICAgdGltZU9iamVjdC5hcGpzVGltZSA9IGFjdGlvbi5wYXlsb2FkO1xuICAgICAgICAgICAgdGltZU9iamVjdC5wbGF5ZXJUaW1lID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBwbGF5ZXJBY3Rpb25zLlNFVF9CRUFDT046XG4gICAgICAgICAgICBsZXQgaW5kZXggPSB0aW1lT2JqZWN0LmJlYWNvbnMuZmluZEluZGV4KGJlYWNvbiA9PiBiZWFjb24udHlwZSA9PT0gYWN0aW9uLnBheWxvYWQudHlwZSAmJiBiZWFjb24udGltZUluZGV4ID09PSBhY3Rpb24ucGF5bG9hZC50aW1lSW5kZXgpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHRpbWVPYmplY3QuYmVhY29ucy5zcGxpY2UoaW5kZXgsIGFjdGlvbi5wYXlsb2FkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGltZU9iamVjdC5iZWFjb25zLnB1c2goYWN0aW9uLnBheWxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgcGxheWVyQWN0aW9ucy5DTEVBUl9CRUFDT05TOlxuICAgICAgICAgICAgdGltZU9iamVjdC5iZWFjb25zID0gW107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBwbGF5ZXJBY3Rpb25zLlNFVF9USU1FX1NISUZUQUJMRTpcbiAgICAgICAgICAgIHRpbWVPYmplY3QudGltZVNoaWZ0YWJsZSA9IGFjdGlvbi5wYXlsb2FkO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRpbWVPYmplY3Q7XG59XG5cbmNvbnN0IHBsYXllclN0YXRlUmVkdWNlciA9IChwbGF5ZXJTdGF0ZSA9IHBsYXllckVudW1zLlNUT1BQRUQsIGFjdGlvbikgPT4ge1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSBwbGF5ZXJBY3Rpb25zLlNUT1BQRURfU1RBVEU6XG4gICAgICAgICAgICBwbGF5ZXJTdGF0ZSA9IHBsYXllckVudW1zLlNUT1BQRUQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBwbGF5ZXJBY3Rpb25zLlBMQVlfU1RBVEU6XG4gICAgICAgICAgICBwbGF5ZXJTdGF0ZSA9IHBsYXllckVudW1zLlBMQVlJTkc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBwbGF5ZXJBY3Rpb25zLlBBVVNFX1NUQVRFOlxuICAgICAgICAgICAgcGxheWVyU3RhdGUgPSBwbGF5ZXJFbnVtcy5QQVVTRUQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBwbGF5ZXJBY3Rpb25zLlNUQUxMRURfU1RBVEU6XG4gICAgICAgICAgICBwbGF5ZXJTdGF0ZSA9IHBsYXllckVudW1zLlNUQUxMRUQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBwbGF5ZXJBY3Rpb25zLlNFRUtJTkdfU1RBVEU6XG4gICAgICAgICAgICBwbGF5ZXJTdGF0ZSA9IHBsYXllckVudW1zLlNFRUtJTkc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBwbGF5ZXJBY3Rpb25zLkNMSVBfRU5ERUQ6XG4gICAgICAgICAgICBwbGF5ZXJTdGF0ZSA9IHBsYXllckVudW1zLkVOREVEO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBwbGF5ZXJTdGF0ZVxufVxuXG5jb25zdCBjbGlwTGlzdFJlZHVjZXIgPSAoYXNzZXRDbGlwTGlzdCA9IHtjbGlwTGlzdDogW10sIGN1cnJlbnRDbGlwSW5kZXg6IDB9LCBhY3Rpb24pID0+IHtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgcGxheWVyQWN0aW9ucy5ORVhUX0NMSVA6XG4gICAgICAgICAgICBhc3NldENsaXBMaXN0LmN1cnJlbnRDbGlwSW5kZXgrKztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIHBsYXllckFjdGlvbnMuUFJFVl9DTElQOlxuICAgICAgICAgICAgYXNzZXRDbGlwTGlzdC5jdXJyZW50Q2xpcEluZGV4LS07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBwbGF5ZXJBY3Rpb25zLlNXSVRDSF9DTElQOlxuICAgICAgICAgICAgYXNzZXRDbGlwTGlzdC5jdXJyZW50Q2xpcEluZGV4ID0gYWN0aW9uLmNsaXBJbmRleDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIHBsYXllckFjdGlvbnMuQ0xJUExJU1RfVVBEQVRFOlxuICAgICAgICAgICAgYXNzZXRDbGlwTGlzdCA9IGFjdGlvbi5hc3NldENsaXBMaXN0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFzc2V0Q2xpcExpc3Q7XG59XG5cbmxldCBhcEpTUmVkdWNlcnMgPSBjb21iaW5lUmVkdWNlcnMoe1xuICAgIHBsYXllclN0YXRlUmVkdWNlcixcbiAgICBjbGlwTGlzdFJlZHVjZXJcbn0pXG5cbmV4cG9ydCB7XG4gICAgdGltZWxpbmVSZWR1Y2VyLFxuICAgIHBsYXllclN0YXRlUmVkdWNlcixcbiAgICBjbGlwTGlzdFJlZHVjZXIsXG4gICAgYXBKU1JlZHVjZXJzXG59IiwiaW1wb3J0IHsgY3JlYXRlU3RvcmUgfSBmcm9tICdyZWR1eCc7XG5pbXBvcnQgeyB0aW1lbGluZVJlZHVjZXIsIGFwSlNSZWR1Y2VycyB9IGZyb20gJy4uL3JlZHVjZXJzL2luZGV4LmpzJztcbmltcG9ydCB7IGNvbXBvc2VXaXRoRGV2VG9vbHMgfSBmcm9tICdyZWR1eC1kZXZ0b29scy1leHRlbnNpb24nO1xuXG5jb25zdCBjb21wb3NlRW5oYW5jZXJzID0gY29tcG9zZVdpdGhEZXZUb29scyh7IHJlYWx0aW1lOiB0cnVlIH0pO1xuY29uc3QgdGltZWxpbmVTdG9yZSA9IGNyZWF0ZVN0b3JlKHRpbWVsaW5lUmVkdWNlciwgY29tcG9zZUVuaGFuY2VycygpKTtcbmNvbnN0IGFwanNTdG9yZSA9IGNyZWF0ZVN0b3JlKGFwSlNSZWR1Y2VycywgY29tcG9zZUVuaGFuY2VycygpKTtcblxuZXhwb3J0IHtcbiAgICB0aW1lbGluZVN0b3JlLFxuICAgIGFwanNTdG9yZVxufSIsImltcG9ydCB7IGJlYWNvblR5cGVzIH0gZnJvbSAnLi9wbGF5ZXJFbnVtcy5qcyc7XG5cblxuZXhwb3J0IGRlZmF1bHQgW1xuICAgIGJlYWNvblR5cGVzLkRFRkFVTFRfSU1QUkVTU0lPTixcbiAgICBiZWFjb25UeXBlcy5GSVJTVF9RVUFSVElMRSxcbiAgICBiZWFjb25UeXBlcy5NSURXQVksXG4gICAgYmVhY29uVHlwZXMuVEhJUkRfUVVBUlRJTEUsXG4gICAgYmVhY29uVHlwZXMuQ09NUExFVEVcbl0iLCJleHBvcnQgZGVmYXVsdCBbXG4gICAge1xuICAgICAgICB1cmw6IFwiaHR0cHM6Ly9tZWRpYS53My5vcmcvMjAxMC8wNS9zaW50ZWwvdHJhaWxlci5tcDRcIlxuICAgIH0sXG4gICAge1xuICAgICAgICB1cmw6IFwiaHR0cDovL2NvbW1vbmRhdGFzdG9yYWdlLmdvb2dsZWFwaXMuY29tL2d0di12aWRlb3MtYnVja2V0L3NhbXBsZS9CaWdCdWNrQnVubnkubXA0XCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdXJsOiBcImh0dHA6Ly9jb21tb25kYXRhc3RvcmFnZS5nb29nbGVhcGlzLmNvbS9ndHYtdmlkZW9zLWJ1Y2tldC9zYW1wbGUvRWxlcGhhbnRzRHJlYW0ubXA0XCJcbiAgICB9XG5dIiwiaW1wb3J0IHsgdGltZVVwZGF0ZSwgcGxheVN0YXRlLCBwYXVzZVN0YXRlLCBzdGFsbGVkU3RhdGUsIHN0b3BwZWRTdGF0ZSwgc2Vla2luZ1N0YXRlLCBuZXh0Q2xpcCwgdXBkYXRlQ2xpcExpc3QsIGNsaXBFbmRlZCwgc2V0QWJvc2x1dGVUaW1lbGluZSwgc2V0QmVhY29uLCBjbGVhckJlYWNvbnMsIHNldFRpbWVTaGlmdGFibGUgfSBmcm9tICcuL2FjdGlvbnMvaW5kZXguanMnO1xuaW1wb3J0IHsgZ2V0V2hvbGVQbGF5ZXJUaW1lLCBjb252ZXJ0VG9NaWxsaXNlY29uZHMsIGNvbnZlcnRUb1NlY29uZHN9IGZyb20gJy4vdXRpbHMuanMnO1xuaW1wb3J0IHsgdGltZWxpbmVTdG9yZSwgYXBqc1N0b3JlIH0gZnJvbSAnLi9zdG9yZS9pbmRleC5qcyc7XG5pbXBvcnQgeyBwbGF5ZXJFbnVtcywgYmVhY29uVHlwZXMgfSBmcm9tICcuL3R5cGVzL3BsYXllckVudW1zLmpzJztcbmltcG9ydCBiZWFjb25zIGZyb20gJy4vdHlwZXMvYmVhY29ucy5qcyc7XG5pbXBvcnQgQ2xpcExpc3QgZnJvbSAnLi90eXBlcy9jbGlwTGlzdC5qcyc7XG5cbmNvbnN0IGludGVydmFsVGltZSA9IDEwMDtcbmNvbnN0IFNUQUxMRURfVEhSRVNIT0xEID0gMTAwMDA7XG5jb25zdCBBRF9USU1FX01JTExJU0VDT05EUyA9IDE1MDAwO1xubGV0IHNhbXBsZVZpZGVvUGxheWVyO1xubGV0IHRpbWVsaW5lSW50ZXJ2YWw7XG5cbiQoZnVuY3Rpb24oKSB7XG4gICAgc2FtcGxlVmlkZW9QbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNhbXBsZVZpZGVvUGxheWVyXCIpO1xuICAgIHNhbXBsZVZpZGVvUGxheWVyLm9ucGxheSA9ICgpID0+IHtcbiAgICAgICAgcHJvY2Vzc0JlYWNvbnMoKTtcbiAgICAgICAgYXBqc1N0b3JlLmRpc3BhdGNoKHBsYXlTdGF0ZSgpKTtcbiAgICAgICAgaW5pdFRpbWVyKCk7XG4gICAgfTtcbiAgICBzYW1wbGVWaWRlb1BsYXllci5vbnBhdXNlID0gKCkgPT4ge1xuICAgICAgICBhcGpzU3RvcmUuZGlzcGF0Y2gocGF1c2VTdGF0ZSgpKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lbGluZUludGVydmFsKTtcbiAgICB9XG4gICAgc2FtcGxlVmlkZW9QbGF5ZXIub25zdGFsbGVkID0gKCkgPT4ge1xuICAgICAgICBhcGpzU3RvcmUuZGlzcGF0Y2goc3RhbGxlZFN0YXRlKCkpO1xuICAgIH1cbiAgICBzYW1wbGVWaWRlb1BsYXllci5vbnNlZWtpbmcgPSAoKSA9PiB7XG4gICAgICAgIGFwanNTdG9yZS5kaXNwYXRjaChzZWVraW5nU3RhdGUoKSk7XG4gICAgfVxuICAgIHNhbXBsZVZpZGVvUGxheWVyLm9uc2Vla2VkID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHRpbWVsaW5lU3RvcmUuZGlzcGF0Y2goc2V0QWJvc2x1dGVUaW1lbGluZShnZXRXaG9sZVBsYXllclRpbWUoY29udmVydFRvTWlsbGlzZWNvbmRzKHNhbXBsZVZpZGVvUGxheWVyLmN1cnJlbnRUaW1lKSkpKTtcbiAgICB9O1xuICAgIHNhbXBsZVZpZGVvUGxheWVyLm9uZW5kZWQgPSAoKSA9PiB7XG4gICAgICAgIGFwanNTdG9yZS5kaXNwYXRjaChjbGlwRW5kZWQoKSk7XG4gICAgICAgIGxldCBhcGpzU3RvcmVTdGF0ZSA9IGFwanNTdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgICBpZiAoYXBqc1N0b3JlU3RhdGUpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50Q2xpcEluZGV4ID0gYXBqc1N0b3JlU3RhdGUuY2xpcExpc3RSZWR1Y2VyLmN1cnJlbnRDbGlwSW5kZXggfHwgMDtcbiAgICAgICAgICAgIGxldCBjbGlwTGlzdEZyb21TdG9yZSA9IGFwanNTdG9yZVN0YXRlLmNsaXBMaXN0UmVkdWNlci5jbGlwTGlzdDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Q2xpcEluZGV4ICsgMSA8IGNsaXBMaXN0RnJvbVN0b3JlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRpbWVsaW5lU3RvcmUuZGlzcGF0Y2goc2V0QWJvc2x1dGVUaW1lbGluZSgwKSk7XG4gICAgICAgICAgICAgICAgdGltZWxpbmVTdG9yZS5kaXNwYXRjaChjbGVhckJlYWNvbnMoKSk7XG4gICAgICAgICAgICAgICAgYXBqc1N0b3JlLmRpc3BhdGNoKG5leHRDbGlwKCkpO1xuICAgICAgICAgICAgICAgIGxvYWRWaWRlb1NyYyhzYW1wbGVWaWRlb1BsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2FtcGxlVmlkZW9QbGF5ZXIub25sb2FkZWRkYXRhID0gKCkgPT4ge1xuICAgICAgICBsZXQgYXBqc1N0b3JlU3RhdGUgPSBhcGpzU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgbGV0IGN1cnJlbnRDbGlwSW5kZXggPSBhcGpzU3RvcmVTdGF0ZS5jbGlwTGlzdFJlZHVjZXIuY3VycmVudENsaXBJbmRleCB8fCAwO1xuICAgICAgICBpZiAoY3VycmVudENsaXBJbmRleCA+IDApIHtcbiAgICAgICAgICAgIHNhbXBsZVZpZGVvUGxheWVyLnBsYXkoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFwanNTdG9yZS5kaXNwYXRjaCh1cGRhdGVDbGlwTGlzdChDbGlwTGlzdCwgMCkpO1xuICAgIGxvYWRWaWRlb1NyYyhzYW1wbGVWaWRlb1BsYXllcik7XG4gICAgdGltZWxpbmVTdG9yZS5zdWJzY3JpYmUob25UaW1lVXBkYXRlKTtcbn0pO1xuXG5mdW5jdGlvbiBsb2FkVmlkZW9TcmMoc2FtcGxlVmlkZW9QbGF5ZXIpIHtcbiAgICBsZXQgYXBqc1N0b3JlU3RhdGUgPSBhcGpzU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICBpZiAoYXBqc1N0b3JlU3RhdGUuY2xpcExpc3RSZWR1Y2VyKSB7XG4gICAgICAgIGxldCBjbGlwTGlzdEZyb21TdG9yZSA9IGFwanNTdG9yZVN0YXRlLmNsaXBMaXN0UmVkdWNlci5jbGlwTGlzdDtcbiAgICAgICAgbGV0IGN1cnJlbnRDbGlwSW5kZXggPSBhcGpzU3RvcmVTdGF0ZS5jbGlwTGlzdFJlZHVjZXIuY3VycmVudENsaXBJbmRleCB8fCAwO1xuICAgICAgICBsZXQgc291cmNlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIik7XG4gICAgICAgIHNvdXJjZUVsZW1lbnQudHlwZSA9IFwidmlkZW8vbXA0XCI7XG4gICAgICAgIHNvdXJjZUVsZW1lbnQuc3JjID0gY2xpcExpc3RGcm9tU3RvcmVbY3VycmVudENsaXBJbmRleF0udXJsO1xuICAgICAgICBzYW1wbGVWaWRlb1BsYXllci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBzYW1wbGVWaWRlb1BsYXllci5hcHBlbmRDaGlsZChzb3VyY2VFbGVtZW50KTtcbiAgICAgICAgaWYgKGN1cnJlbnRDbGlwSW5kZXggPiAwKSB7XG4gICAgICAgICAgICBzYW1wbGVWaWRlb1BsYXllci5sb2FkKClcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc0JlYWNvbnMoKSB7XG4gICAgbGV0IGFzc2V0RHVyYXRpb24gPSBzYW1wbGVWaWRlb1BsYXllci5kdXJhdGlvbjtcbiAgICBiZWFjb25zLm1hcChiZWFjb25UeXBlID0+IHtcbiAgICAgICAgbGV0IHRpbWVJbmRleCA9IDA7XG4gICAgICAgIHN3aXRjaCAoYmVhY29uVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBiZWFjb25UeXBlcy5ERUZBVUxUX0lNUFJFU1NJT046XG4gICAgICAgICAgICAgICAgdGltZUluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgYmVhY29uVHlwZXMuRklSU1RfUVVBUlRJTEU6XG4gICAgICAgICAgICAgICAgdGltZUluZGV4ID0gYXNzZXREdXJhdGlvbiAqIC4yNTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgYmVhY29uVHlwZXMuTUlEV0FZOiBcbiAgICAgICAgICAgICAgICB0aW1lSW5kZXggPSBhc3NldER1cmF0aW9uIC8gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgYmVhY29uVHlwZXMuVEhJUkRfUVVBUlRJTEU6XG4gICAgICAgICAgICAgICAgdGltZUluZGV4ID0gYXNzZXREdXJhdGlvbiAqIC43NTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgYmVhY29uVHlwZXMuQ09NUExFVEU6XG4gICAgICAgICAgICAgICAgdGltZUluZGV4ID0gYXNzZXREdXJhdGlvbjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBiZWFjb24gPSB7XG4gICAgICAgICAgICB0eXBlOiBiZWFjb25UeXBlLFxuICAgICAgICAgICAgdGltZUluZGV4OiBjb252ZXJ0VG9NaWxsaXNlY29uZHModGltZUluZGV4KSxcbiAgICAgICAgICAgIGlzRmlyZWQ6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgdGltZWxpbmVTdG9yZS5kaXNwYXRjaChzZXRCZWFjb24oYmVhY29uKSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRUaW1lcigpIHtcbiAgICB0aW1lbGluZUludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgbGV0IHByZXZQbGF5ZXJUaW1lID0gdGltZWxpbmVTdG9yZS5nZXRTdGF0ZSgpLnBsYXllclRpbWU7IFxuICAgICAgICBsZXQgY3VycmVudEFQSlNUaW1lID0gc2FtcGxlVmlkZW9QbGF5ZXIuY3VycmVudFRpbWU7XG4gICAgICAgIGxldCBjdXJyZW50UGxheWVyU3RhdGUgPSBhcGpzU3RvcmUuZ2V0U3RhdGUoKS5wbGF5ZXJTdGF0ZTtcbiAgICAgICAgaWYgKChjdXJyZW50QVBKU1RpbWUgLSBwcmV2UGxheWVyVGltZSkgPiBTVEFMTEVEX1RIUkVTSE9MRCAmJiBjdXJyZW50UGxheWVyU3RhdGUgIT09IHBsYXllckVudW1zLlNUQUxMRUQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJTdGFsbCBkZXRlY3RlZFwiKTtcbiAgICAgICAgICAgIGFwanNTdG9yZS5kaXNwYXRjaChzdGFsbGVkU3RhdGUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGltZWxpbmVTdG9yZS5kaXNwYXRjaCh0aW1lVXBkYXRlKGludGVydmFsVGltZSwgY3VycmVudEFQSlNUaW1lKSk7XG4gICAgfSwgaW50ZXJ2YWxUaW1lKTtcbn1cblxuZnVuY3Rpb24gb25UaW1lVXBkYXRlKCkge1xuICAgIGxldCBjdXJyZW50QVBKU1RpbWVNUyA9IHRpbWVsaW5lU3RvcmUuZ2V0U3RhdGUoKS5hcGpzVGltZTtcbiAgICBsZXQgY3VycmVudEFQSlNUaW1lU2Vjb25kcyA9IGNvbnZlcnRUb1NlY29uZHMoY3VycmVudEFQSlNUaW1lTVMpO1xuICAgIGxldCBjdXJyZW50UGxheWVyVGltZSA9IHRpbWVsaW5lU3RvcmUuZ2V0U3RhdGUoKS5wbGF5ZXJUaW1lO1xuXG4gICAgaWYgKGN1cnJlbnRBUEpTVGltZU1TICUgMTAwMCA9PT0gMCAmJiBjdXJyZW50QVBKU1RpbWVNUyAhPT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgMSBzZWNvbmQgaW50ZXJ2YWwgaGFwcGVuZWQhIEFQSlNUaW1lOiAke2N1cnJlbnRBUEpTVGltZU1TfSBtcyBQbGF5ZXJUaW1lOiAke2N1cnJlbnRQbGF5ZXJUaW1lfSBzZWNgKTtcbiAgICB9XG5cbiAgICBpZiAoY3VycmVudEFQSlNUaW1lU2Vjb25kcyAlIDMwID09PSAwICYmIGN1cnJlbnRBUEpTVGltZU1TICE9PSAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAzMCBzZWNvbmQgaW50ZXJ2YWwgaGFwcGVuZWQhIEFQSlNUaW1lOiAke2N1cnJlbnRBUEpTVGltZVNlY29uZHN9IHNlYyBQbGF5ZXJUaW1lOiAke2N1cnJlbnRQbGF5ZXJUaW1lfSBzZWNgKTtcbiAgICB9XG5cbiAgICBpZiAoY3VycmVudEFQSlNUaW1lU2Vjb25kcyAlIDYwID09PSAwICYmIGN1cnJlbnRBUEpTVGltZU1TICE9PSAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAxIG1pbnV0ZSBpbnRlcnZhbCBoYXBwZW5lZCEgQVBKU1RpbWU6ICR7Y3VycmVudEFQSlNUaW1lU2Vjb25kc30gc2VjIFBsYXllclRpbWU6ICR7Y3VycmVudFBsYXllclRpbWV9IHNlY2ApO1xuICAgIH1cblxuICAgIGlmIChjdXJyZW50QVBKU1RpbWVTZWNvbmRzICUgMzAwID09PSAwICYmIGN1cnJlbnRBUEpTVGltZU1TICE9PSAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGA1IG1pbnV0ZSBpbnRlcnZhbCBoYXBwZW5lZCEgQVBKU1RpbWU6ICR7Y3VycmVudEFQSlNUaW1lU2Vjb25kc30gc2VjIFBsYXllclRpbWU6ICR7Y3VycmVudFBsYXllclRpbWV9IHNlY2ApO1xuICAgIH1cblxuICAgIGxldCBiZWFjb25zID0gdGltZWxpbmVTdG9yZS5nZXRTdGF0ZSgpLmJlYWNvbnM7XG4gICAgbGV0IHBlbmRpbmdCZWFjb25zID0gYmVhY29ucy5maWx0ZXIoYmVhY29uID0+ICFiZWFjb24uaXNGaXJlZCk7XG4gICAgaWYgKHBlbmRpbmdCZWFjb25zICYmIEFycmF5LmlzQXJyYXkocGVuZGluZ0JlYWNvbnMpICYmIHBlbmRpbmdCZWFjb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHBlbmRpbmdCZWFjb25zWzBdLnRpbWVJbmRleCA8PSBjdXJyZW50QVBKU1RpbWVNUykge1xuICAgICAgICAgICAgcGVuZGluZ0JlYWNvbnNbMF0uaXNGaXJlZCA9IHRydWU7XG4gICAgICAgICAgICB0aW1lbGluZVN0b3JlLmRpc3BhdGNoKHNldEJlYWNvbihwZW5kaW5nQmVhY29uc1swXSkpO1xuICAgICAgICAgICAgdGltZWxpbmVTdG9yZS5kaXNwYXRjaChzZXRUaW1lU2hpZnRhYmxlKGZhbHNlKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkJlYWNvbiBldmVudCBmaXJlZDogXCIsIHBlbmRpbmdCZWFjb25zWzBdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBpc1RpbWVTaGlmdGFibGUgPSB0aW1lbGluZVN0b3JlLmdldFN0YXRlKCkudGltZVNoaWZ0YWJsZTtcbiAgICBsZXQgbGFzdEZpcmVkQmVhY29uID0gYmVhY29ucy5maWx0ZXIoYmVhY29uID0+IGJlYWNvbi5pc0ZpcmVkKTtcbiAgICBpZiAobGFzdEZpcmVkQmVhY29uICYmIEFycmF5LmlzQXJyYXkobGFzdEZpcmVkQmVhY29uKSAmJiBsYXN0RmlyZWRCZWFjb24ubGVuZ3RoID4gMCAmJiAhaXNUaW1lU2hpZnRhYmxlKSB7XG4gICAgICAgIGlmIChsYXN0RmlyZWRCZWFjb25bbGFzdEZpcmVkQmVhY29uLmxlbmd0aCAtIDFdLnRpbWVJbmRleCArIEFEX1RJTUVfTUlMTElTRUNPTkRTIDw9IGN1cnJlbnRBUEpTVGltZU1TKSB7XG4gICAgICAgICAgICB0aW1lbGluZVN0b3JlLmRpc3BhdGNoKHNldFRpbWVTaGlmdGFibGUodHJ1ZSkpO1xuICAgICAgICB9XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=